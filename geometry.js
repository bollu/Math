/* Geometry (c) Robby Kraft, MIT License */
(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.Geometry={})})(this,function(a){"use strict";var h=Math.sin,i=Math.cos;function c(){let a=Array.from(arguments);if(0==a.length)return[];if(null!=a[0].vector&&a[0].vector.constructor==Array)return a[0].vector;let b=a.filter(a=>a.constructor===Array);if(1<=b.length)return b[0];let c=a.filter(a=>!isNaN(a));return 1<=c.length?c:isNaN(a[0].x)?[]:["x","y","z"].map(b=>a[0][b]).filter(b=>null!=b)}function e(){let a=Array.from(arguments),b=a.filter(a=>!isNaN(a)),c=a.filter(a=>a.constructor===Array);if(0==a.length)return[];if(null!=a[0].m&&a[0].m.constructor==Array&&(b=a[0].m.slice()),0==b.length&&1<=c.length&&(b=c[0]),6<=b.length)return b.slice(0,6);if(4<=b.length){let a=b.slice(0,4);return a[4]=0,a[5]=0,a}return[1,0,0,1,0,0]}function f(){var a=Math.sqrt;let d=c(...arguments);const b=function(){let b=d.map(a=>a*a).reduce((a,b)=>a+b);return a(b)},h=function(){let e=c(...arguments),b=d.slice();return null==b[2]&&(b[2]=0),null==e[2]&&(e[2]=0),b[1]*e[2]-b[2]*e[1]-(b[0]*e[2]-b[2]*e[0])+(b[0]*e[1]-b[1]*e[0])},i=function(){let a=e(...arguments);return f(d[0]*a[0]+d[1]*a[2]+a[4],d[0]*a[1]+d[1]*a[3]+a[5])};return Object.freeze({normalize:function(){let a=b(),c=d.map(b=>b/a);return f(c)},magnitude:b,dot:function(){let a=c(...arguments),b=d.length<a.length?d.length:a.length;return Array.from(Array(b)).map((b,c)=>d[c]*a[c]).reduce((a,b)=>a+b,0)},cross:function(){return h(...arguments)},distanceTo:function(){let b=c(...arguments),e=d.length<b.length?d.length:b.length,f=Array.from(Array(e)).map((a,c)=>Math.pow(d[c]-b[c],2)).reduce((a,b)=>a+b,0);return a(f)},transform:i,rotateZ:function(a,b){return i(g().rotation(a,b))},rotateZ90:function(){return f(-d[1],d[0])},rotateZ180:function(){return f(-d[0],-d[1])},rotateZ270:function(){return f(d[1],-d[0])},reflect:function(){let a=get_line(...arguments);return i(g().reflection(a.vector,a.point))},lerp:function(a,b){let e=c(a),g=d.length<e.length?d.length:e.length,h=Array.from(Array(g)).map((a,c)=>d[c]*b+e[c]*(1-b));return f(h)},equivalent:function(a,b=EPSILON_HIGH){let e=c(a),f=d.length<e.length?d.slice():e,g=d.length<e.length?e:d.slice();for(var h=f.length;h<g.length;h++)f[h]=0;return g.map((a,c)=>Math.abs(f[c]-g[c])<b).reduce((a,b)=>a&&b,!0)},scale:function(a){return f(d.map(b=>b*a))},midpoint:function(){let a=c(...arguments),b=d.length<a.length?d.slice():a,e=d.length<a.length?a:d.slice();for(var g=b.length;g<e.length;g++)b[g]=0;return f(e.map((a,c)=>.5*(b[c]+e[c])))},get vector(){return d},get x(){return d[0]},get y(){return d[1]},get z(){return d[2]}})}function g(){let h=e(...arguments);return Object.freeze({inverse:function(){var e=h[0]*h[3]-h[1]*h[2];if(!e||isNaN(e)||!isFinite(h[4])||!isFinite(h[5]))return;let f=h[3]/e,a=-h[1]/e,b=-h[2]/e,c=h[0]/e,d=(h[2]*h[5]-h[3]*h[4])/e,i=(h[1]*h[4]-h[0]*h[5])/e;return g(f,a,b,c,d,i)},multiply:function(){let f=e(...arguments),i=h[0]*f[0]+h[2]*f[1],a=h[0]*f[2]+h[2]*f[3],c=h[0]*f[4]+h[2]*f[5]+h[4],j=h[1]*f[0]+h[3]*f[1],b=h[1]*f[2]+h[3]*f[3],d=h[1]*f[4]+h[3]*f[5]+h[5];return g(i,j,a,b,c,d)},transform:function(){let a=c(...arguments);return f(a[0]*h[0]+a[1]*h[2]+h[4],a[0]*h[1]+a[1]*h[3]+h[5])},get m(){return h}})}g.identity=function(){return g(1,0,0,1,0,0)},g.rotation=function(e,f){var j=i(e),a=h(e),b=-h(e),c=i(e),d=null==f?0:f[0],k=null==f?0:f[1];return g(j,a,b,c,d,k)},g.reflection=function(e,f){let j=Math.atan2(e[1],e[0]),k=i(j),l=h(j),m=i(-j),n=h(-j),o=k*m+l*n,a=k*-n+l*m,b=l*m+-k*n,c=l*-n+-k*m,d=f[0]+o*-f[0]+-f[1]*b,p=f[1]+a*-f[0]+-f[1]*c;return g(o,a,b,c,d,p)},a.Vector=f,a.Matrix=g,Object.defineProperty(a,"__esModule",{value:!0})});
