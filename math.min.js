"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("core-js/modules/es6.array.sort"),require("core-js/modules/es6.regexp.to-string"),require("core-js/modules/web.dom.iterable"),require("core-js/modules/es7.symbol.async-iterator"),require("core-js/modules/es6.symbol");/* Math (c) Robby Kraft, MIT License */var magnitude=function(e){var t=e.map(function(e){return e*e}).reduce(function(e,t){return e+t},0);return Math.sqrt(t)},normalize=function(e){var t=magnitude(e);return e.map(function(e){return e/t})},dot=function(e,t){return e.map(function(n,r){return e[r]*t[r]}).reduce(function(e,t){return e+t},0)},average=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=0<t.length?t[0].length:0,r=Array(i).fill(0);return t.forEach(function(e){return r.forEach(function(t,n){r[n]+=e[n]||0})}),r.map(function(e){return e/t.length})},cross2=function(e,t){return[e[0]*t[1],e[1]*t[0]]},cross3=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[0]*t[2]-e[2]*t[0],e[0]*t[1]-e[1]*t[0]]},distance2=function(e,t){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},distance3=function(t,n){var i=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2];return Math.sqrt(i*i+r*r+o*o)},distance=function(e,t){for(var n=e.length,r=0,o=0;o<n;o+=1)r+=Math.pow(e[o]-t[o],2);return Math.sqrt(r)},midpoint2=function(e,t){return e.map(function(n,r){return(e[r]+t[r])/2})},algebra=/*#__PURE__*/Object.freeze({magnitude:magnitude,normalize:normalize,dot:dot,average:average,cross2:cross2,cross3:cross3,distance2:distance2,distance3:distance3,distance:distance,midpoint2:midpoint2}),multiply_vector2_matrix2=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]},multiply_line_matrix2=function(e,t,n){var r=multiply_vector2_matrix2(e,n),o=t.map(function(n,r){return t[r]+e[r]}),l=multiply_vector2_matrix2(o,n).map(function(e,t){return e-r[t]});return[r,l]},multiply_matrices2=function(e,t){var n=e[0]*t[0]+e[2]*t[1],i=e[0]*t[2]+e[2]*t[3],r=e[0]*t[4]+e[2]*t[5]+e[4],o=e[1]*t[0]+e[3]*t[1],l=e[1]*t[2]+e[3]*t[3],a=e[1]*t[4]+e[3]*t[5]+e[5];return[n,o,i,l,r,a]},make_matrix2_reflection=function(e,t){var n=Math.sin,i=Math.cos,r=t&&t[0]?t[0]:0,o=t&&t[1]?t[1]:0,l=Math.atan2(e[1],e[0]),p=i(l),g=n(l),s=i(-l),_=n(-l),y=p*s+g*_,a=p*-_+g*s,h=g*s+-p*_,c=g*-_+-p*s;return[y,a,h,c,r+y*-r+-o*h,o+a*-r+-o*c]},make_matrix2_rotation=function(e,t){var n=Math.cos(e),i=Math.sin(e),r=null==t?0:t[0],o=null==t?0:t[1];return[n,i,-i,n,r,o]},make_matrix2_translation=function(e,t){return[1,0,0,1,e,t]},make_matrix2_scale_origin=function(e){return[e,0,0,e,0,0]},make_matrix2_scale=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[0,0],n=e*-t[0]+t[0],i=e*-t[1]+t[1];return[e,0,0,e,n,i]},make_matrix2_inverse=function(e){var t=e[0]*e[3]-e[1]*e[2];return t&&!isNaN(t)&&isFinite(e[4])&&isFinite(e[5])?[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]:void 0},matrix=/*#__PURE__*/Object.freeze({multiply_vector2_matrix2:multiply_vector2_matrix2,multiply_line_matrix2:multiply_line_matrix2,multiply_matrices2:multiply_matrices2,make_matrix2_reflection:make_matrix2_reflection,make_matrix2_rotation:make_matrix2_rotation,make_matrix2_translation:make_matrix2_translation,make_matrix2_scale_origin:make_matrix2_scale_origin,make_matrix2_scale:make_matrix2_scale,make_matrix2_inverse:make_matrix2_inverse});function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(i=(l=a.next()).done)&&(n.push(l.value),!(t&&n.length===t));i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var clean_number=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:15;return parseFloat(e.toFixed(t))},is_number=function(e){return null!=e&&!isNaN(e)},is_vector=function(e){return null!=e&&null!=e[0]&&!isNaN(e[0])},is_iterable=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},flatten_input=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];switch(n.length){case void 0:case 0:return n;case 1:return is_iterable(n[0])?e.apply(void 0,_toConsumableArray(n[0])):[n[0]];default:return Array.from(n).map(function(t){return is_iterable(t)?_toConsumableArray(e(t)):t}).reduce(function(e,t){return e.concat(t)},[]);}},semi_flatten_input=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t;1===i.length&&i[0].length;){var r=i,o=_slicedToArray(r,1);i=o[0]}return i},get_vector=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=flatten_input(t).filter(function(e){return void 0!==e});if(0!==i.length)return isNaN(i[0].x)||(i=["x","y","z"].map(function(e){return i[0][e]}).filter(function(e){return void 0!==e})),i.filter(function(e){return"number"==typeof e})},get_vector_of_vectors=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return semi_flatten_input(t).map(function(e){return get_vector(e)})},identity=[1,0,0,1,0,0],get_matrix2=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=get_vector(t);return 6===r.length?r:6<r.length?[r[0],r[1],r[3],r[4],r[5],r[6]]:6>r.length?identity.map(function(e,t){return r[t]||e}):void 0};function get_edge(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return get_vector_of_vectors(t)}function get_line(){var e=Array.from(arguments),t=e.filter(function(e){return!isNaN(e)}),n=e.filter(function(e){return e.constructor===Array});if(0==e.length)return{vector:[],point:[]};if(!isNaN(e[0])&&4<=t.length)return{point:[e[0],e[1]],vector:[e[2],e[3]]};if(0<n.length){if(1===n.length)return get_line.apply(void 0,_toConsumableArray(n[0]));if(2===n.length)return{point:[n[0][0],n[0][1]],vector:[n[1][0],n[1][1]]};if(4===n.length)return{point:[n[0],n[1]],vector:[n[2],n[3]]}}if(e[0].constructor===Object){var i=[],r=[];return null==e[0].vector?null!=e[0].direction&&(i=get_vector(e[0].direction)):i=get_vector(e[0].vector),null==e[0].point?null!=e[0].origin&&(r=get_vector(e[0].origin)):r=get_vector(e[0].point),{point:r,vector:i}}return{point:[],vector:[]}}function get_ray(){return get_line.apply(void 0,arguments)}function get_two_vec2(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){if(1===t.length&&void 0!==t[0])return get_two_vec2.apply(void 0,_toConsumableArray(t[0]));var i=Array.from(t),r=i.filter(function(e){return!isNaN(e)}),o=i.filter(function(e){return"object"===_typeof(e)}).filter(function(e){return e.constructor===Array});return 4<=r.length?[[r[0],r[1]],[r[2],r[3]]]:2<=o.length&&!isNaN(o[0][0])?o:1!==o.length||isNaN(o[0][0][0])?void 0:o[0]}}function get_array_of_vec(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?void 0:1===t.length&&void 0!==t[0]?get_array_of_vec.apply(void 0,_toConsumableArray(t[0])):Array.from(t)}function get_array_of_vec2(){var e=Array.from(arguments),t=e.filter(function(e){return e.constructor===Array});return 2<=t.length&&!isNaN(t[0][0])?t:1===t.length&&1<=t[0].length?t[0]:e}var EPSILON=1e-6,array_similarity_test=function(e,t){return Array.from(Array(e.length-1)).map(function(n,r){return t(e[0],e[r+1])}).reduce(function(e,t){return e&&t},!0)},equivalent_numbers=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 0!==n.length&&(1===n.length&&void 0!==n[0]?e.apply(void 0,_toConsumableArray(n[0])):array_similarity_test(n,function(e,t){return Math.abs(e-t)<EPSILON}))},equivalent_vectors=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_vector_of_vectors(n);if(0===r.length)return!1;if(1===r.length&&void 0!==r[0])return e.apply(void 0,_toConsumableArray(r[0]));var o=r[0].length,l=Array.from(Array(o));return Array.from(Array(r.length-1)).map(function(e,t){return l.map(function(e,n){return Math.abs(r[t][n]-r[t+1][n])<EPSILON}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)&&Array.from(Array(r.length-1)).map(function(e,t){return r[0].length===r[t+1].length}).reduce(function(e,t){return e&&t},!0)},equivalent=function(){for(var e=Math.abs,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=semi_flatten_input(n);if(1>r.length)return!1;var o=_typeof(r[0]);if("undefined"===o)return!1;switch(r[0].constructor===Array&&(r=r.map(function(e){return semi_flatten_input(e)})),o){case"number":return array_similarity_test(r,function(t,n){return e(t-n)<EPSILON});case"boolean":return array_similarity_test(r,function(e,t){return e===t});case"object":return r[0].constructor===Array?equivalent_vectors(r):(console.warn("comparing array of objects for equivalency by slow stringify and no-epsilon"),array_similarity_test(r,function(e,t){return JSON.stringify(e)===JSON.stringify(t)}));default:console.warn("incapable of determining comparison method");}return!1},equal=/*#__PURE__*/Object.freeze({EPSILON:EPSILON,equivalent_numbers:equivalent_numbers,equivalent_vectors:equivalent_vectors,equivalent:equivalent}),overlap_function=function(e,t,n,i,r){var o=function(e,t){return e[0]*t[1]-t[0]*e[1]},l=o(t,i),a=o([n[0]-e[0],n[1]-e[1]],i),p=o([e[0]-n[0],e[1]-n[1]],t);if(Math.abs(l)<EPSILON)return!1;return r(a/l,p/-l)},edge_edge_comp=function(e,t){return e>=-EPSILON&&e<=1+EPSILON&&t>=-EPSILON&&t<=1+EPSILON},edge_edge_overlap=function(e,t,n,i){var r=[t[0]-e[0],t[1]-e[1]],o=[i[0]-n[0],i[1]-n[1]];return overlap_function(e,r,n,o,edge_edge_comp)},degenerate=function(e){return Math.abs(e.reduce(function(e,t){return e+t},0))<EPSILON},parallel=function(e,t){return 1-Math.abs(dot(normalize(e),normalize(t)))<EPSILON},point_on_line=function(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:EPSILON,r=[n[0]-e[0],n[1]-e[1]],o=r[0]*t[1]-r[1]*t[0];return Math.abs(o)<i},point_on_edge=function(e,t,n){var i=Math.sqrt,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:EPSILON,o=[e[0]-t[0],e[1]-t[1]],l=[e[0]-n[0],e[1]-n[1]],a=[t[0]-n[0],t[1]-n[1]],p=i(o[0]*o[0]+o[1]*o[1]),g=i(l[0]*l[0]+l[1]*l[1]),c=i(a[0]*a[0]+a[1]*a[1]);return Math.abs(p-g-c)<r},point_in_poly=function(e,t){for(var n=!1,r=0,o=t.length-1;r<t.length;o=r++)t[r][1]>e[1]!=t[o][1]>e[1]&&e[0]<(t[o][0]-t[r][0])*(e[1]-t[r][1])/(t[o][1]-t[r][1])+t[r][0]&&(n=!n);return n},point_in_convex_poly=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:EPSILON;return!!(null!=t&&0<t.length)&&t.map(function(t,r,i){var o=i[(r+1)%i.length],l=[o[0]-t[0],o[1]-t[1]],a=[e[0]-t[0],e[1]-t[1]];return l[0]*a[1]-l[1]*a[0]>-n}).map(function(e,t,n){return e===n[0]}).reduce(function(e,t){return e&&t},!0)},point_in_convex_poly_exclusive=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:EPSILON;return!!(null!=t&&0<t.length)&&t.map(function(t,r,i){var o=i[(r+1)%i.length],l=[o[0]-t[0],o[1]-t[1]],a=[e[0]-t[0],e[1]-t[1]];return l[0]*a[1]-l[1]*a[0]>n}).map(function(e,t,n){return e===n[0]}).reduce(function(e,t){return e&&t},!0)},convex_polygons_overlap=function(e,t){for(var n=e.map(function(e,t,n){return[e,n[(t+1)%n.length]]}),r=t.map(function(e,t,n){return[e,n[(t+1)%n.length]]}),o=0;o<n.length;o+=1)for(var l=0;l<r.length;l+=1)if(edge_edge_overlap(n[o][0],n[o][1],r[l][0],r[l][1]))return!0;return!!point_in_poly(t[0],e)||!!point_in_poly(e[0],t)},convex_polygon_is_enclosed=function(e,t){var n=t.map(function(t){return point_in_convex_poly(t,e)}).reduce(function(e,t){return e||t},!1);return!n&&void 0},convex_polygons_enclose=function(e,t){var n=t.map(function(t){return point_in_convex_poly(t,e)}).reduce(function(e,t){return e||t},!1),i=e.map(function(t){return point_in_convex_poly(t,e)}).reduce(function(e,t){return e&&t},!0);return!n&&i},is_counter_clockwise_between=function(e,t,n){var i=Math.PI;for(;n<t;)n+=2*i;for(;e<t;)e+=2*i;return e<n},query=/*#__PURE__*/Object.freeze({overlap_function:overlap_function,edge_edge_overlap:edge_edge_overlap,degenerate:degenerate,parallel:parallel,point_on_line:point_on_line,point_on_edge:point_on_edge,point_in_poly:point_in_poly,point_in_convex_poly:point_in_convex_poly,point_in_convex_poly_exclusive:point_in_convex_poly_exclusive,convex_polygons_overlap:convex_polygons_overlap,convex_polygon_is_enclosed:convex_polygon_is_enclosed,convex_polygons_enclose:convex_polygons_enclose,is_counter_clockwise_between:is_counter_clockwise_between}),line_line_comp=function(){return!0},line_ray_comp=function(e,t){return t>=-EPSILON},line_edge_comp=function(e,t){return t>=-EPSILON&&t<=1+EPSILON},ray_ray_comp=function(e,t){return e>=-EPSILON&&t>=-EPSILON},ray_edge_comp=function(e,t){return e>=-EPSILON&&t>=-EPSILON&&t<=1+EPSILON},edge_edge_comp$1=function(e,t){return e>=-EPSILON&&e<=1+EPSILON&&t>=-EPSILON&&t<=1+EPSILON},line_ray_comp_exclusive=function(e,t){return t>EPSILON},line_edge_comp_exclusive=function(e,t){return t>EPSILON&&t<1-EPSILON},ray_ray_comp_exclusive=function(e,t){return e>EPSILON&&t>EPSILON},ray_edge_comp_exclusive=function(e,t){return e>EPSILON&&t>EPSILON&&t<1-EPSILON},edge_edge_comp_exclusive=function(e,t){return e>EPSILON&&e<1-EPSILON&&t>EPSILON&&t<1-EPSILON},limit_line=function(e){return e},limit_ray=function(e){return e<-EPSILON?0:e},limit_edge=function(e){return e<-EPSILON?0:e>1+EPSILON?1:e},intersection_function=function(e,t,n,i,r){var l=Math.abs;function o(e,t){return e[0]*t[1]-t[0]*e[1]}var a=5<arguments.length&&arguments[5]!==void 0?arguments[5]:EPSILON,p=o(t,i);if(!(l(p)<a)){var g=o([n[0]-e[0],n[1]-e[1]],i),c=o([e[0]-n[0],e[1]-n[1]],t),s=g/p;return r(s,c/-p,a)?[e[0]+t[0]*s,e[1]+t[1]*s]:void 0}},line_line=function(e,t,n,i,r){return intersection_function(e,t,n,i,line_line_comp,r)},line_ray=function(e,t,n,i,r){return intersection_function(e,t,n,i,line_ray_comp,r)},line_edge=function(e,t,n,i,r){var o=[i[0]-n[0],i[1]-n[1]];return intersection_function(e,t,n,o,line_edge_comp,r)},ray_ray=function(e,t,n,i,r){return intersection_function(e,t,n,i,ray_ray_comp,r)},ray_edge=function(e,t,n,i,r){var o=[i[0]-n[0],i[1]-n[1]];return intersection_function(e,t,n,o,ray_edge_comp,r)},edge_edge=function(e,t,n,i,r){var o=[t[0]-e[0],t[1]-e[1]],l=[i[0]-n[0],i[1]-n[1]];return intersection_function(e,o,n,l,edge_edge_comp$1,r)},line_ray_exclusive=function(e,t,n,i,r){return intersection_function(e,t,n,i,line_ray_comp_exclusive,r)},line_edge_exclusive=function(e,t,n,i,r){var o=[i[0]-n[0],i[1]-n[1]];return intersection_function(e,t,n,o,line_edge_comp_exclusive,r)},ray_ray_exclusive=function(e,t,n,i,r){return intersection_function(e,t,n,i,ray_ray_comp_exclusive,r)},ray_edge_exclusive=function(e,t,n,i,r){var o=[i[0]-n[0],i[1]-n[1]];return intersection_function(e,t,n,o,ray_edge_comp_exclusive,r)},edge_edge_exclusive=function(e,t,n,i,r){var o=[t[0]-e[0],t[1]-e[1]],l=[i[0]-n[0],i[1]-n[1]];return intersection_function(e,o,n,l,edge_edge_comp_exclusive,r)},circle_line=function(e,t,n,i){var o=Math.abs,l=Math.sqrt;function r(e){return e<-a?-1:1}var a=4<arguments.length&&arguments[4]!==void 0?arguments[4]:EPSILON,p=n[0]-e[0],g=n[1]-e[1],c=i[0]-e[0],s=i[1]-e[1],_=c-p,y=s-g,d=p*s-c*g,h=d*d,f=t*t,m=o(_*_+y*y),u=f*m-h;if(!(u<-a)){var v=l(f*m-h),k=[e[0]+(d*y+r(y)*_*v)/m,e[1]+(-d*_+o(y)*v)/m];if(u>a){var P=[e[0]+(d*y-r(y)*_*v)/m,e[1]+(-d*_-o(y)*v)/m];return[k,P]}return[k]}},circle_ray=function(){throw"circle_ray has not been written yet"},circle_edge=function(e,t,n,i){var o=Math.abs,l=Math.sqrt;function r(e){return 0>e?-1:1}var a=Math.pow(t,2),p=n[0]-e[0],g=n[1]-e[1],c=i[0]-e[0],s=i[1]-e[1],_=c-p,y=s-g,d=_*_+y*y,h=p*s-c*g,f=(h*y+r(y)*_*l(a*d-h*h))/d,m=(h*y-r(y)*_*l(a*d-h*h))/d,u=(-h*_+o(y)*l(a*d-h*h))/d,v=(-h*_-o(y)*l(a*d-h*h))/d,k=isNaN(f),P=isNaN(m);return k||P?k&&P?void 0:k?P?void 0:[[m+e[0],v+e[1]]]:[[f+e[0],u+e[1]]]:[[f+e[0],u+e[1]],[m+e[0],v+e[1]]]},quick_equivalent_2=function(e,t){var n=Math.abs;return n(e[0]-t[0])<EPSILON&&n(e[1]-t[1])<EPSILON},convex_poly_line=function(e,t,n){var r=e.map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return line_edge(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[r[0],r[0]];case 2:return r;default:for(var o=1;o<r.length;o+=1)if(!quick_equivalent_2(r[0],r[o]))return[r[0],r[o]];}},convex_poly_ray=function(e,t,n){var r=e.map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return ray_edge(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[t,r[0]];case 2:return r;default:for(var o=1;o<r.length;o+=1)if(!quick_equivalent_2(r[0],r[o]))return[r[0],r[o]];}},convex_poly_edge=function(e,t,n){var i=e.map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return edge_edge_exclusive(t,n,e[0],e[1])}).filter(function(e){return null!=e}),r=point_in_convex_poly_exclusive(t,e),o=point_in_convex_poly_exclusive(n,e),l=point_in_convex_poly(t,e),a=point_in_convex_poly(n,e);if(0===i.length&&(r||o))return[t,n];if(0===i.length&&l&&a)return[t,n];switch(i.length){case 0:return r?[_toConsumableArray(t),_toConsumableArray(n)]:void 0;case 1:return l?[_toConsumableArray(t),i[0]]:[_toConsumableArray(n),i[0]];case 2:return i;default:throw new Error("clipping edge in a convex polygon resulting in 3 or more points");}},convex_poly_ray_exclusive=function(e,t,n){var r=e.map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return ray_edge_exclusive(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[t,r[0]];case 2:return r;default:for(var o=1;o<r.length;o+=1)if(!quick_equivalent_2(r[0],r[o]))return[r[0],r[o]];}},intersection=/*#__PURE__*/Object.freeze({limit_line:limit_line,limit_ray:limit_ray,limit_edge:limit_edge,intersection_function:intersection_function,line_line:line_line,line_ray:line_ray,line_edge:line_edge,ray_ray:ray_ray,ray_edge:ray_edge,edge_edge:edge_edge,line_ray_exclusive:line_ray_exclusive,line_edge_exclusive:line_edge_exclusive,ray_ray_exclusive:ray_ray_exclusive,ray_edge_exclusive:ray_edge_exclusive,edge_edge_exclusive:edge_edge_exclusive,circle_line:circle_line,circle_ray:circle_ray,circle_edge:circle_edge,convex_poly_line:convex_poly_line,convex_poly_ray:convex_poly_ray,convex_poly_edge:convex_poly_edge,convex_poly_ray_exclusive:convex_poly_ray_exclusive}),clockwise_angle2_radians=function(e,t){var n=Math.PI;for(;0>e;)e+=2*n;for(;0>t;)t+=2*n;var i=e-t;return 0<=i?i:2*n-(t-e)},counter_clockwise_angle2_radians=function(e,t){var n=Math.PI;for(;0>e;)e+=2*n;for(;0>t;)t+=2*n;var i=t-e;return 0<=i?i:2*n-(e-t)},clockwise_angle2=function(e,t){var n=Math.PI,i=Math.atan2,r=t[0]*e[0]+t[1]*e[1],o=t[0]*e[1]-t[1]*e[0],l=i(o,r);return 0>l&&(l+=2*n),l},counter_clockwise_angle2=function(e,t){var n=Math.PI,i=Math.atan2,r=e[0]*t[0]+e[1]*t[1],o=e[0]*t[1]-e[1]*t[0],l=i(o,r);return 0>l&&(l+=2*n),l},counter_clockwise_vector_order=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){return Math.atan2(e[1],e[0])}),r=Array.from(Array(i.length)).map(function(e,t){return t}).sort(function(e,t){return i[e]-i[t]});return r.slice(r.indexOf(0),r.length).concat(r.slice(0,r.indexOf(0)))},interior_angles2=function(e,t){var n=counter_clockwise_angle2(e,t),i=2*Math.PI-n;return[n,i]},interior_angles=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e,t,n){return counter_clockwise_angle2(e,n[(t+1)%n.length])})},bisect_vectors=function(e,t){var n=normalize(e),r=normalize(t),i=n.map(function(e,t){return n[t]+r[t]}),o=normalize(i),l=n.map(function(e,t){return-n[t]+-r[t]});return[o,normalize(l)]},bisect_lines2=function(e,n,i,r){var o=Math.abs,l=n[0]*r[1]-r[0]*n[1];if(o(l)<EPSILON){var a=[midpoint2(e,i),[n[0],n[1]]],p=[a,a],g=n[0]*r[0]+n[1]*r[1];return delete(0<g?p[1]:p[0]),p}var c=(i[0]-e[0])*r[1]-r[0]*(i[1]-e[1]),s=c/l,t=e[0]+n[0]*s,_=e[1]+n[1]*s,y=bisect_vectors(n,r);return y[1]=[y[1][1],-y[1][0]],y.map(function(e){return[[t,_],e]})},subsect_radians=function(e,t,n){var r=counter_clockwise_angle2(t,n)/e;return Array.from(Array(e-1)).map(function(e,n){return t+r*n})},subsect=function(e,t,n){var i=Math.atan2,r=i(t[1],t[0]),o=i(n[1],n[0]);return subsect_radians(e,r,o).map(function(e){return[Math.cos(e),Math.sin(e)]})},signed_area=function(e){return .5*e.map(function(e,t,n){var i=n[(t+1)%n.length];return e[0]*i[1]-i[0]*e[1]}).reduce(function(e,t){return e+t},0)},centroid=function(e){var t=1/(6*signed_area(e));return e.map(function(e,t,n){var i=n[(t+1)%n.length],r=e[0]*i[1]-i[0]*e[1];return[(e[0]+i[0])*r,(e[1]+i[1])*r]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(e){return e*t})},enclosing_rectangle=function(e){var t=e[0].length,n=Array.from(Array(t)).map(function(){return 1/0}),r=Array.from(Array(t)).map(function(){return-Infinity});e.forEach(function(e){return e.forEach(function(e,t){e<n[t]&&(n[t]=e),e>r[t]&&(r[t]=e)})});var o=r.map(function(e,t){return e-n[t]});return[n,o]},make_regular_polygon=function(e){var t=Math.PI,n=Math.cos,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,p=.5*(2*t/e),g=i/n(p);return Array.from(Array(Math.floor(e))).map(function(r,c){var i=-2*t*c/e+p,a=clean_number(o+g*Math.sin(i),14),s=clean_number(l+g*n(i),14);return[a,s]})},smallest_comparison_search=function(e,t,n){for(var r,o=t.map(function(t,r){return{o:t,i:r,d:n(e,t)}}),l=1/0,a=0;a<o.length;a+=1)o[a].d<l&&(r=a,l=o[a].d);return r},nearest_point2=function(e,t){var n=smallest_comparison_search(e,t,distance2);return n===void 0?void 0:t[n]},nearest_point=function(e,t){var n=smallest_comparison_search(e,t,distance);return n===void 0?void 0:t[n]},nearest_point_on_line=function(e,t,n,i){var r=Math.pow,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:EPSILON,l=r(t[0],2)+r(t[1],2),a=[0,1].map(function(t,r){return n[r]-e[r]}),p=[0,1].map(function(t,r){return n[r]-e[r]}),g=[0,1].map(function(e,n){return t[n]*a[n]}).reduce(function(e,t){return e+t},0),c=i(g/l,o);return[0,1].map(function(n,r){return e[r]+t[r]*c})},split_polygon=function(e,t,n){var i=Math.abs,r=e.map(function(e,r){var i=point_on_line(t,n,e);return{type:"v",point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),o=e.map(function(e,r,i){var o=line_edge_exclusive(t,n,e,i[(r+1)%i.length]);return{type:"e",point:o,at_index:r}}).filter(function(e){return null!=e.point}),l=r.concat(o).sort(function(e,t){return i(e.point[0]-t.point[0])<EPSILON?e.point[1]-t.point[1]:e.point[0]-t.point[0]});return console.log(l),e},split_convex_polygon=function(e,t,n){var i=e.map(function(e,r){var i=point_on_line(t,n,e);return{point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),r=e.map(function(e,r,i){var o=line_edge_exclusive(t,n,e,i[(r+1)%i.length]);return{point:o,at_index:r}}).filter(function(e){return null!=e.point});if(2==r.length){var o=r.slice().sort(function(e,t){return e.at_index-t.at_index}),l=e.slice(o[1].at_index+1).concat(e.slice(0,o[0].at_index+1));l.push(o[0].point),l.push(o[1].point);var a=e.slice(o[0].at_index+1,o[1].at_index+1);return a.push(o[1].point),a.push(o[0].point),[l,a]}if(1==r.length&&1==i.length){i[0].type="v",r[0].type="e";var p=i.concat(r).sort(function(e,t){return e.at_index-t.at_index}),g=e.slice(p[1].at_index+1).concat(e.slice(0,p[0].at_index+1));"e"===p[0].type&&g.push(p[0].point),g.push(p[1].point);var c=e.slice(p[0].at_index+1,p[1].at_index+1);return"e"===p[1].type&&c.push(p[1].point),c.push(p[0].point),[g,c]}if(2==i.length){var s=i.slice().sort(function(e,t){return e.at_index-t.at_index}),_=e.slice(s[1].at_index).concat(e.slice(0,s[0].at_index+1)),y=e.slice(s[0].at_index,s[1].at_index+1);return[_,y]}return[e.slice()]},convex_hull=function(e){var t=Math.PI,n=Math.abs,i=Math.atan2,r=Math.pow,o=Math.sqrt,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:EPSILON,a=e.slice().sort(function(e,t){return n(e[1]-t[1])<l?e[0]-t[0]:e[1]-t[1]}),p=[];p.push(a[0]);var g=0,c=0,s=function(){c+=1;var e=p.length-1,s=a.filter(function(t){return!(n(t[0]-p[e][0])<l&&n(t[1]-p[e][1])<l)}).map(function(n){for(var r=i(p[e][1]-n[1],p[e][0]-n[0]);r<g;)r+=2*t;return{node:n,angle:r,distance:void 0}}).sort(function(e,t){return e.angle<t.angle?-1:e.angle>t.angle?1:0});if(0===s.length)return{v:void 0};var _=s[0];return s=s.filter(function(e){return n(_.angle-e.angle)<l}).map(function(t){var n=o(r(p[e][0]-t.node[0],2)+r(p[e][1]-t.node[1],2));return t.distance=n,t}).sort(function(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0}),0<p.filter(function(e){return e===s[0].node}).length?{v:p}:void(p.push(s[0].node),g=i(p[e][1]-s[0].node[1],p[e][0]-s[0].node[0]))};do{var _=s();if("object"===_typeof(_))return _.v}while(c<1e4)},geometry=/*#__PURE__*/Object.freeze({clockwise_angle2_radians:clockwise_angle2_radians,counter_clockwise_angle2_radians:counter_clockwise_angle2_radians,clockwise_angle2:clockwise_angle2,counter_clockwise_angle2:counter_clockwise_angle2,counter_clockwise_vector_order:counter_clockwise_vector_order,interior_angles2:interior_angles2,interior_angles:interior_angles,bisect_vectors:bisect_vectors,bisect_lines2:bisect_lines2,subsect_radians:subsect_radians,subsect:subsect,signed_area:signed_area,centroid:centroid,enclosing_rectangle:enclosing_rectangle,make_regular_polygon:make_regular_polygon,nearest_point2:nearest_point2,nearest_point:nearest_point,nearest_point_on_line:nearest_point_on_line,split_polygon:split_polygon,split_convex_polygon:split_convex_polygon,convex_hull:convex_hull}),alternating_sum=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return[0,1].map(function(e){return t.filter(function(t,n){return n%2===e}).reduce(function(e,t){return e+t},0)})},kawasaki_sector_score=function(){var e=Math.PI;return alternating_sum.apply(void 0,arguments).map(function(t){return 0>t?t+2*e:t}).map(function(t){return e-t})},kawasaki_solutions_radians=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e,t,n){return counter_clockwise_angle2_radians(e,n[(t+1)%n.length])}).map(function(e,t,n){return n.slice(t+1,n.length).concat(n.slice(0,t))}).map(function(e){return kawasaki_sector_score.apply(void 0,_toConsumableArray(e))}).map(function(e,n){return t[n]+e[0]}).map(function(e,n){return is_counter_clockwise_between(e,t[n],t[(n+1)%t.length])?e:void 0})},kawasaki_solutions=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.map(function(e){return Math.atan2(e[1],e[0])});return kawasaki_solutions_radians.apply(void 0,_toConsumableArray(i)).map(function(e){return e===void 0?void 0:[clean_number(Math.cos(e),14),clean_number(Math.sin(e),14)]})},origami=/*#__PURE__*/Object.freeze({alternating_sum:alternating_sum,kawasaki_sector_score:kawasaki_sector_score,kawasaki_solutions_radians:kawasaki_solutions_radians,kawasaki_solutions:kawasaki_solutions}),VectorPrototype=function(e){var r,t=Math.pow,n=Math.sqrt,o=[],l=e,a=function(){return l(normalize(r))},p=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t);return this.length>i.length?dot(i,r):dot(r,i)},g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t),o=r.slice();return null==o[2]&&(o[2]=0),null==i[2]&&(i[2]=0),l(cross3(o,i))},c=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var l=get_vector(i),a=r.length<l.length?r.length:l.length,p=Array.from(Array(a)).map(function(e,n){return t(r[n]-l[n],2)}).reduce(function(e,t){return e+t},0);return n(p)},s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_matrix2(t);return l(multiply_vector2_matrix2(r,i))},_=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=get_vector(t);return l(r.map(function(e,t){return e+o[t]}))},y=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=get_vector(t);return l(r.map(function(e,t){return e-o[t]}))},d=function(e,t){var n=make_matrix2_rotation(e,t);return l(multiply_vector2_matrix2(r,n))},h=function(){return l(-r[1],r[0])},f=function(){return l(-r[0],-r[1])},m=function(){return l(r[1],-r[0])},u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_line(t),o=make_matrix2_reflection(i.vector,i.point);return l(multiply_vector2_matrix2(r,o))},v=function(e,t){var n=get_vector(e),i=r.length<n.length?r.length:n.length,o=Array.from(Array(i)).map(function(e,o){return r[o]*t+n[o]*(1-t)});return l(o)},k=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t),o=r.length<i.length?r:i,l=r.length<i.length?i:r;return equivalent(o,l)},P=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t),o=r.length<i.length?r:i,l=r.length<i.length?i:r;return parallel(o,l)},x=function(e){return l(r.map(function(t){return t*e}))},b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var o=get_vector(t),a=r.length<o.length?r.slice():o,p=r.length<o.length?o:r.slice(),g=a.length;g<p.length;g+=1)a[g]=0;return l(p.map(function(e,t){return .5*(a[t]+p[t])}))},w=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t);return bisect_vectors(r,i).map(function(e){return l(e)})};return Object.defineProperty(o,"normalize",{value:a}),Object.defineProperty(o,"dot",{value:p}),Object.defineProperty(o,"cross",{value:g}),Object.defineProperty(o,"distanceTo",{value:c}),Object.defineProperty(o,"transform",{value:s}),Object.defineProperty(o,"add",{value:_}),Object.defineProperty(o,"subtract",{value:y}),Object.defineProperty(o,"rotateZ",{value:d}),Object.defineProperty(o,"rotateZ90",{value:h}),Object.defineProperty(o,"rotateZ180",{value:f}),Object.defineProperty(o,"rotateZ270",{value:m}),Object.defineProperty(o,"reflect",{value:u}),Object.defineProperty(o,"lerp",{value:v}),Object.defineProperty(o,"isEquivalent",{value:k}),Object.defineProperty(o,"isParallel",{value:P}),Object.defineProperty(o,"scale",{value:x}),Object.defineProperty(o,"midpoint",{value:b}),Object.defineProperty(o,"bisect",{value:w}),Object.defineProperty(o,"copy",{value:function(){return l.apply(void 0,_toConsumableArray(r))}}),Object.defineProperty(o,"magnitude",{get:function(){return magnitude(r)}}),Object.defineProperty(o,"bind",{value:function(e){r=e}}),o},Vector=function e(){var t=VectorPrototype(e),n=Object.create(t);t.bind(n);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return get_vector(r).forEach(function(e){return n.push(e)}),Object.defineProperty(n,"x",{get:function(){return n[0]}}),Object.defineProperty(n,"y",{get:function(){return n[1]}}),Object.defineProperty(n,"z",{get:function(){return n[2]}}),n},Matrix2=function e(){for(var t=[],n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];get_matrix2(i).forEach(function(e){return t.push(e)});return Object.defineProperty(t,"inverse",{value:function(){return e(make_matrix2_inverse(t).map(function(e){return clean_number(e,13)}))}}),Object.defineProperty(t,"multiply",{value:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=get_matrix2(i);return e(multiply_matrices2(t,o).map(function(e){return clean_number(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=get_vector(n);return Vector(multiply_vector2_matrix2(r,t).map(function(e){return clean_number(e,13)}))}}),Object.freeze(t)};Matrix2.makeIdentity=function(){return Matrix2(1,0,0,1,0,0)},Matrix2.makeTranslation=function(e,t){return Matrix2(1,0,0,1,e,t)},Matrix2.makeRotation=function(e,t){return Matrix2(make_matrix2_rotation(e,t).map(function(e){return clean_number(e,13)}))},Matrix2.makeReflection=function(e,t){return Matrix2(make_matrix2_reflection(e,t).map(function(e){return clean_number(e,13)}))};function Prototype(e,t){var n=null==t?{}:t,i=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:EPSILON;return this.compare_function(e,t)&&!0},r=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:EPSILON;return this.compare_function(e,n)&&t>=-n},o=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:EPSILON;return this.compare_function(e,n)&&t>=-n&&t<=1+n};return Object.defineProperty(n,"isParallel",{value:function(e,t){if(null==e.vector)throw"line isParallel(): please ensure object contains a vector";var n=this.vector.length<e.vector.length,i=n?this.vector:e.vector,r=n?e.vector:this.vector;return parallel(i,r,t)}}),Object.defineProperty(n,"isDegenerate",{value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:EPSILON;return degenerate(this.vector,e)}}),Object.defineProperty(n,"nearestPoint",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t);return Vector(nearest_point_on_line(this.point,this.vector,i,this.clip_function))}}),Object.defineProperty(n,"reflection",{value:function(){return Matrix2.makeReflection(this.vector,this.point)}}),Object.defineProperty(n,"intersect",{value:function(e){var t=this;return intersection_function(this.point,this.vector,e.point,e.vector,function(n,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:EPSILON;return t.compare_function(n,r)&&e.compare_function(i,r)})}}),Object.defineProperty(n,"intersectLine",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=get_line(t);return intersection_function(this.point,this.vector,r.point,r.vector,i.bind(this))}}),Object.defineProperty(n,"intersectRay",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_ray(t);return intersection_function(this.point,this.vector,i.point,i.vector,r.bind(this))}}),Object.defineProperty(n,"intersectEdge",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_edge(t),r=[i[1][0]-i[0][0],i[1][1]-i[0][1]];return intersection_function(this.point,this.vector,i[0],r,o.bind(this))}}),Object.freeze(n)}var Line=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_line(n),o=r.point,l=r.vector,a=Prototype.bind(this),p=Object.create(a(e));return Object.defineProperty(p,"compare_function",{value:function(){return!0}}),Object.defineProperty(p,"clip_function",{value:limit_line}),Object.defineProperty(p,"point",{get:function(){return Vector(o)}}),Object.defineProperty(p,"vector",{get:function(){return Vector(l)}}),Object.defineProperty(p,"length",{get:function(){return 1/0}}),Object.defineProperty(p,"transform",{value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_matrix2(n),a=multiply_line_matrix2(o,l,r);return e(a[0],a[1])}}),p};Line.fromPoints=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_two_vec2(t);return Line({point:i[0],vector:normalize([i[1][0]-i[0][0],i[1][1]-i[0][1]])})},Line.perpendicularBisector=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_two_vec2(t),r=normalize([i[1][0]-i[0][0],i[1][1]-i[0][1]]);return Line({point:average(i[0],i[1]),vector:[r[1],-r[0]]})};var Ray=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_line(n),o=r.point,l=r.vector,a=Prototype.bind(this),p=Object.create(a(e));return Object.defineProperty(p,"point",{get:function(){return Vector(o)}}),Object.defineProperty(p,"vector",{get:function(){return Vector(l)}}),Object.defineProperty(p,"length",{get:function(){return 1/0}}),Object.defineProperty(p,"transform",{value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_matrix2(n),a=multiply_vector2_matrix2(o,r),p=l.map(function(e,t){return e+o[t]}),g=multiply_vector2_matrix2(p,r).map(function(e,t){return e-a[t]});return e(a,g)}}),Object.defineProperty(p,"rotate180",{value:function(){return e(o[0],o[1],-l[0],-l[1])}}),Object.defineProperty(p,"compare_function",{value:function(e,t){return e>=-t}}),Object.defineProperty(p,"clip_function",{value:limit_ray}),p};Ray.fromPoints=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_two_vec2(t);return Ray({point:i[0],vector:normalize([i[1][0]-i[0][0],i[1][1]-i[0][1]])})};var Edge=function e(){for(var t=Math.pow,n=Math.sqrt,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var l=get_two_vec2(r),a=Prototype.bind(this),g=Object.create(a(e,[])),c=0<l.length?l.map(function(e){return Vector(e)}):void 0;if(void 0!==c){c.forEach(function(e,t){g[t]=e});var s=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_matrix2(n),o=g.map(function(e){return multiply_vector2_matrix2(e,r)});return e(o)},_=function(){return Vector(g[1][0]-g[0][0],g[1][1]-g[0][1])},y=function(){return Vector(average(g[0],g[1]))},d=function(){return n(t(g[1][0]-g[0][0],2)+t(g[1][1]-g[0][1],2))},h=function(e,t){return e>=-t&&e<=1+t};return Object.defineProperty(g,"point",{get:function(){return g[0]}}),Object.defineProperty(g,"vector",{get:function(){return _()}}),Object.defineProperty(g,"midpoint",{value:y}),Object.defineProperty(g,"length",{get:function(){return d()}}),Object.defineProperty(g,"transform",{value:s}),Object.defineProperty(g,"compare_function",{value:h}),Object.defineProperty(g,"clip_function",{value:limit_edge}),g}},Circle=function(){for(var e,t,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=Array.from(i),l=o.filter(function(e){return!isNaN(e)});if(3===l.length){e=Vector(l[0],l[1]);var a=_slicedToArray(l,3);t=a[2]}var p=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=get_line(i),l=[o.point[0]+o.vector[0],o.point[1]+o.vector[1]],a=circle_line(e,t,o.point,l);return a===void 0?void 0:a.map(function(e){return Vector(e)})},g=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=get_ray(i),l=circle_ray(e,t,o[0],o[1]);return l===void 0?void 0:l.map(function(e){return Vector(e)})},c=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=get_two_vec2(i),l=circle_edge(e,t,o[0],o[1]);return l===void 0?void 0:l.map(function(e){return Vector(e)})};return{intersectionLine:p,intersectionRay:g,intersectionEdge:c,get origin(){return e},get radius(){return t},set origin(t){e=Vector(t)},set radius(e){t=e}}},Sector=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[0,0],o=[get_vector(e),get_vector(t)];return{contains:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector(t).map(function(e,t){return e+r[t]}),l=(i[1]-o[0][1])*-o[0][0]-(i[0]-o[0][0])*-o[0][1],a=i[1]*o[1][0]-i[0]*o[1][1];return 0>l&&0>a},bisect:function(){var e=counter_clockwise_angle2(o[0],o[1]),t=o.map(function(e){return Math.atan2(e[1],e[0])}),n=t[0]+.5*e;return[Math.cos(n),Math.sin(n)]},subsect:function(e){return subsect(e,o[0],o[1]).map(function(e){return[e[0],e[1]]})},get center(){return r},get vectors(){return o},get angle(){return counter_clockwise_angle2(o[0],o[1])}}};Sector.fromVectors=function(e,t){return Sector(e,t)},Sector.fromPoints=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[0,0],i=[e,t].map(function(e){return e.map(function(t,r){return e[r]-n[r]})});return Sector(i[0],i[1],n)};function Prototype$1(e){var t=Math.sin,n=Math.cos,i=Math.atan2,r=Math.pow,o=Math.sqrt,l={},a=e,p=function(){return signed_area(this.points)},g=function(){return this.points.map(function(e,t,n){return[n[(t+n.length-1)%n.length],n[t],n[(t+1)%n.length]]}).map(function(e){return Sector(e[1],e[2],e[0])})};return Object.defineProperty(l,"area",{value:p}),Object.defineProperty(l,"centroid",{value:function(){return centroid(this.points)}}),Object.defineProperty(l,"midpoint",{value:function(){return average(this.points)}}),Object.defineProperty(l,"enclosingRectangle",{value:function(){return enclosing_rectangle(this.points)}}),Object.defineProperty(l,"contains",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return point_in_poly(get_vector(t),this.points)}}),Object.defineProperty(l,"nearest",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=get_vector(t),l=this.sides.map(function(e){return e.nearestPoint(o)}),a=1/0;return l.map(function(e){return distance2(o,e)}).forEach(function(e,t){e<a&&(a=e,r=t)}),{point:l[r],edge:this.sides[r]}}}),Object.defineProperty(l,"clipEdge",{value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_edge(n),o=convex_poly_edge(this.points,r[0],r[1]);return void 0===o?void 0:Edge(o)}}),Object.defineProperty(l,"clipLine",{value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_line(n),o=convex_poly_line(this.points,r.point,r.vector);return void 0===o?void 0:Edge(o)}}),Object.defineProperty(l,"clipRay",{value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_line(n),o=convex_poly_ray(this.points,r.point,r.vector);return void 0===o?void 0:Edge(o)}}),Object.defineProperty(l,"split",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_line(t);return split_polygon(this.points,i.point,i.vector).map(function(e){return a(e)})}}),Object.defineProperty(l,"scale",{value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:centroid(this.points),n=this.points.map(function(e){return[0,1].map(function(n,r){return e[r]-t[r]})}).map(function(n){return n.map(function(r,o){return t[o]+n[o]*e})});return a(n)}}),Object.defineProperty(l,"rotate",{value:function(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:centroid(this.points),p=this.points.map(function(g){var p=[g[0]-l[0],g[1]-l[1]],c=o(r(p[0],2)+r(p[1],2)),s=i(p[1],p[0]);return[l[0]+n(s+e)*c,l[1]+t(s+e)*c]});return a(p)}}),Object.defineProperty(l,"translate",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=get_vector(t),o=this.points.map(function(e){return e.map(function(e,t){return e+r[t]})});return a(o)}}),Object.defineProperty(l,"transform",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_matrix2(t),r=this.points.map(function(e){return Vector(multiply_vector2_matrix2(e,i))});return a(r)}}),Object.defineProperty(l,"edges",{get:function(){return this.sides}}),Object.defineProperty(l,"sectors",{get:function(){return g()}}),Object.defineProperty(l,"signedArea",{value:p}),Object.freeze(l)}var Polygon=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_vector_of_vectors(t).map(function(e){return Vector(e)});if(void 0!==i){var r=i.map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return Edge(e[0][0],e[0][1],e[1][0],e[1][1])}),o=Prototype$1.bind(this),l=Object.create(o());return Object.defineProperty(l,"points",{get:function(){return i}}),Object.defineProperty(l,"sides",{get:function(){return r}}),l}};Polygon.regularPolygon=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,r=make_regular_polygon(e,t,n,i);return Polygon(r)},Polygon.convexHull=function(e){var t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],n=convex_hull(e,t);return Polygon(n)};var ConvexPolygon=function e(){for(var t=Math.sin,n=Math.cos,i=Math.atan2,r=Math.pow,o=Math.sqrt,l=arguments.length,a=Array(l),p=0;p<l;p++)a[p]=arguments[p];var g=get_array_of_vec(a).map(function(e){return Vector(e)});if(void 0!==g){var c=g.map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return Edge(e[0][0],e[0][1],e[1][0],e[1][1])}),s=Prototype$1.bind(this),_=Object.create(s(e)),y=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=get_line(n);return split_convex_polygon(g,r.point,r.vector).map(function(t){return e(t)})},d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=get_array_of_vec(t);return convex_polygons_overlap(g,i)},h=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:centroid(_.points),i=_.points.map(function(e){return[0,1].map(function(t,r){return e[r]-n[r]})}).map(function(e){return e.map(function(r,o){return n[o]+e[o]*t})});return e(i)},f=function(l){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:centroid(_.points),c=_.points.map(function(e){var p=[e[0]-g[0],e[1]-g[1]],c=o(r(p[0],2)+r(p[1],2)),s=i(p[1],p[0]);return[g[0]+n(s+l)*c,g[1]+t(s+l)*c]});return e(c)};return Object.defineProperty(_,"points",{get:function(){return g}}),Object.defineProperty(_,"sides",{get:function(){return c}}),Object.defineProperty(_,"split",{value:y}),Object.defineProperty(_,"overlaps",{value:d}),Object.defineProperty(_,"scale",{value:h}),Object.defineProperty(_,"rotate",{value:f}),_}};ConvexPolygon.regularPolygon=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,r=make_regular_polygon(e,t,n,i);return ConvexPolygon(r)},ConvexPolygon.convexHull=function(e){var t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],n=convex_hull(e,t);return ConvexPolygon(n)};var Rectangle=function e(){for(var t,n,i,r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];var a=Array.from(o),p=a.filter(function(e){return!isNaN(e)}),g=a.filter(function(e){return e.constructor===Array});if(4===p.length){t=p.slice(0,2);var c=_slicedToArray(p,4);n=c[2],i=c[3]}1===g.length&&(g=g[0]),2===g.length&&"number"==typeof g[0][0]&&(t=g[0].slice(),n=g[1][0],i=g[1][1]);var s=[[t[0],t[1]],[t[0]+n,t[1]],[t[0]+n,t[1]+i],[t[0],t[1]+i]],_=Prototype$1.bind(this),y=Object.create(_(e)),d=function(r,o){var l=null==o?[t[0]+n,t[1]+i]:o,a=t[0]+(l[0]-t[0])*(1-r),p=t[1]+(l[1]-t[1])*(1-r);return e(a,p,n*r,i*r)};return Object.defineProperty(y,"origin",{get:function(){return t}}),Object.defineProperty(y,"width",{get:function(){return n}}),Object.defineProperty(y,"height",{get:function(){return i}}),Object.defineProperty(y,"area",{get:function(){return n*i}}),Object.defineProperty(y,"scale",{value:d}),Object.defineProperty(y,"rotate",{value:function(){var e;return(e=ConvexPolygon(s)).rotate.apply(e,arguments)}}),Object.defineProperty(y,"transform",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ConvexPolygon(s).transform(t)}}),y},Junction=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=get_vector_of_vectors(t);if(void 0!==r){var o=counter_clockwise_vector_order.apply(void 0,_toConsumableArray(r)),l=function(){return o.map(function(e){return r[e]}).map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return Sector.fromVectors(e[0],e[1])})},a=function(){return o.map(function(e){return r[e]}).map(function(e,t,n){return[e,n[(t+1)%n.length]]}).map(function(e){return counter_clockwise_angle2(e[0],e[1])})},p=function(){return alternating_sum.apply(void 0,_toConsumableArray(a()))},g=function(){return kawasaki_sector_score.apply(void 0,_toConsumableArray(a()))},c=function(){return kawasaki_solutions_radians.apply(void 0,_toConsumableArray(a()))};return{sectors:l,angles:a,kawasaki_score:g,kawasaki_solutions:c,alternatingAngleSum:p,get vectors(){return r},get vectorOrder(){return _toConsumableArray(o)}}}};Junction.fromVectors=function(){return Junction.apply(void 0,arguments)},Junction.fromPoints=function(e,t){var n=t.map(function(t){return t.map(function(n,r){return t[r]-e[r]})});return Junction.fromVectors(n)};var core=Object.create(null);Object.assign(core,algebra,matrix,geometry,query,equal,origami),core.clean_number=clean_number,core.is_number=is_number,core.is_vector=is_vector,core.is_iterable=is_iterable,core.flatten_input=flatten_input,core.semi_flatten_input=semi_flatten_input,core.get_vector=get_vector,core.get_vector_of_vectors=get_vector_of_vectors,core.get_matrix2=get_matrix2,core.get_edge=get_edge,core.get_line=get_line,core.get_ray=get_ray,core.get_two_vec2=get_two_vec2,core.get_array_of_vec=get_array_of_vec,core.get_array_of_vec2=get_array_of_vec2,core.intersection=intersection,Object.freeze(core);var math={vector:Vector,matrix2:Matrix2,line:Line,ray:Ray,edge:Edge,circle:Circle,polygon:Polygon,convexPolygon:ConvexPolygon,rectangle:Rectangle,junction:Junction,sector:Sector,core:core},_default=math;exports.default=_default;
