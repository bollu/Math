!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).math=t()}(this,(function(){"use strict";var n=function(n){return Math.sqrt(n.map((function(n){return n*n})).reduce((function(n,t){return n+t}),0))},t=function(t){var r=n(t);return 0===r?t:t.map((function(n){return n/r}))},r=function(n,t){return n.map((function(n){return n*t}))},e=function(n,t){return n.map((function(n,r){return n+t[r]}))},i=function(n,t){return n.map((function(n,r){return n-t[r]}))},o=function(n,t){return n.map((function(r,e){return n[e]*t[e]})).reduce((function(n,t){return n+t}),0)},u=function(n,t){return n.map((function(n,r){return(n+t[r])/2}))},c=function(){var n=arguments,t=arguments.length>0?arguments[0].length:0,r=Array(t).fill(0);return Array.from(arguments).forEach((function(n){return r.forEach((function(t,e){r[e]+=n[e]||0}))})),r.map((function(t){return t/n.length}))},a=function(n,t,r){var e=1-r;return n.map((function(n,i){return n*e+t[i]*r}))},f=function(n,t){return n[0]*t[1]-n[1]*t[0]},s=function(n,t){return[n[1]*t[2]-n[2]*t[1],n[0]*t[2]-n[2]*t[0],n[0]*t[1]-n[1]*t[0]]},l=function(n,t){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)},h=function(n,t){return Math.sqrt(Array.from(Array(n.length)).map((function(r,e){return Math.pow(n[e]-t[e],2)})).reduce((function(n,t){return n+t}),0))},p=function(n){return[-n[1],n[0]]},v=function(n){return n.map((function(n){return-n}))},g=function(n){return[-n[1],n[0]]},m=Object.freeze({__proto__:null,magnitude:n,normalize:t,scale:r,add:e,subtract:i,dot:o,midpoint:u,average:c,lerp:a,cross2:f,cross3:s,distance2:l,distance3:function(n,t){var r=n[0]-t[0],e=n[1]-t[1],i=n[2]-t[2];return Math.sqrt(r*r+e*e+i*i)},distance:h,rotate90:p,flip:v,rotate270:g});function d(n){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function _(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var r=[],e=!0,i=!1,o=void 0;try{for(var u,c=n[Symbol.iterator]();!(e=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);e=!0);}catch(n){i=!0,o=n}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}return r}(n,t)||M(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(n){return function(n){if(Array.isArray(n))return b(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||M(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(n,t){if(n){if("string"==typeof n)return b(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(n,t):void 0}}function b(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var x={},w=180/Math.PI,A=Math.PI/180,P=function(n){if("object"===d(n)){if(null!=n.radius)return"circle";if(null!=n.width)return"rectangle";if(null!=n.x)return"vector";if(null!=n.rotate180)return"ray";if(null!=n[0]&&n[0].length&&null!=n[0].x)return"segment";if(null!=n.vector&&null!=n.origin)return"line"}},j=function(n,t){return{vector:n||[],origin:t||[]}},O=function(n,t){return Array(n).fill(0).map((function(n,r){return t[r]?t[r]:n}))},I=function(n,t){var r=n.length>t.length?n.length:t.length;return[n,t].map((function(n){return O(r,n)}))},k=function(n){var t="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},S=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if("number"!=typeof n)return n;var r=parseFloat(n.toFixed(t));return k(r)===Math.min(t,k(n))?n:r},q=function(n){return null!=n&&"function"==typeof n[Symbol.iterator]},z=function n(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return q(arguments[0])&&"string"!=typeof arguments[0]?n.apply(void 0,y(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(t){return q(t)?y(n(t)):t}))}},E=function(){var n=z(arguments);return n.length>1?n.reduce((function(n,t){return n.concat(t)}),[]):n},N=function(){if(arguments[0]instanceof x.vector)return arguments[0];var n=E(arguments);return n.length>0&&"object"===d(n[0])&&null!==n[0]&&!isNaN(n[0].x)&&(n=["x","y","z"].map((function(t){return n[0][t]})).filter((function(n){return void 0!==n}))),n.filter((function(n){return"number"==typeof n}))},G=function(){return z(arguments).map((function(n){return N(n)}))},F=function(){return arguments[0]instanceof x.segment?arguments[0]:4===arguments.length?[[arguments[0],arguments[1]],[arguments[2],arguments[3]]]:G(arguments)},D=function(){var n=z(arguments);return 0===n.length?j([],[]):n[0]instanceof x.line||n[0]instanceof x.ray||n[0]instanceof x.segment?n[0]:n[0].constructor===Object?j(n[0].vector||[],n[0].origin||[]):"number"==typeof n[0]?j(N(n)):j.apply(void 0,y(n.map((function(n){return N(n)}))))},T=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{width:n,height:t,x:r,y:e}},Z=function(){if(arguments[0]instanceof x.rect)return arguments[0];var n=E(arguments);return n.length>0&&"object"===d(n[0])&&null!==n[0]&&!isNaN(n[0].width)?T.apply(void 0,y(["width","height","x","y"].map((function(t){return n[0][t]})).filter((function(n){return void 0!==n})))):T.apply(void 0,y(n.filter((function(n){return"number"==typeof n}))))},L=[1,0,0,1,0,0],R=[1,0,0,0,1,0,0,0,1,0,0,0],J=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach((function(n){return delete J[2][n]}));var C=function(n){return J[n<8?0:n<13?1:2]},U=function(){var n=E(arguments),t=[].concat(R);return C(n.length).filter((function(t,r){return null!=n[r]})).forEach((function(r,e){t[r]=n[e]})),t},X=Object.freeze({__proto__:null,R2D:w,D2R:A,Typeof:P,lengthSort:function(n,t){return[n,t].sort((function(n,t){return n.length-t.length}))},resize:O,resizeUp:I,resizeDown:function(n,t){var r=n.length>t.length?t.length:n.length;return[n,t].map((function(n){return O(r,n)}))},clean_number:S,is_number:function(n){return null!=n&&!isNaN(n)},is_vector:function(n){return null!=n&&null!=n[0]&&!isNaN(n[0])},is_iterable:q,semi_flatten_arrays:z,flatten_arrays:E,get_vector:N,get_vector_of_vectors:G,get_segment:F,get_line:D,rect_form:T,get_rect:Z,get_matrix_3x4:U,get_matrix2:function(){var n=N(arguments);if(void 0!==n)return 6===n.length?n:n.length>6?[n[0],n[1],n[2],n[3],n[4],n[5]]:n.length<6?L.map((function(t,r){return n[r]||t})):void 0}}),Y=1e-6,$=function(n,t){return n===t},B=function(n,t){return Math.abs(n-t)<Y},H=function(n,t){return Array.from(Array(n.length-1)).map((function(r,e){return t(n[0],n[e+1])})).reduce((function(n,t){return n&&t}),!0)},V=function(n,t){var r=I(n,t);return r[0].map((function(n,t){return Math.abs(r[0][t]-r[1][t])<Y})).reduce((function(n,t){return n&&t}),!0)},K=Object.freeze({__proto__:null,EPSILON:Y,equivalent_arrays_of_numbers:function(){},equivalent_numbers:function n(){return 0!==arguments.length&&(1===arguments.length&&void 0!==arguments[0]?n.apply(void 0,y(arguments[0])):H(arguments,B))},equivalent_vectors:V,equivalent_vectors_old:function(){var n=G.apply(void 0,arguments);if(0===n.length)return!1;if(1===n.length&&void 0!==n[0])return V.apply(void 0,y(n[0]));for(var t=n[0].length,r=Array.from(Array(t)),e=1;e<n.length;e+=1)if(d(n[e-1])!==d(n[e]))return!1;return Array.from(Array(n.length-1)).map((function(t,e){return r.map((function(t,r){return Math.abs(n[e][r]-n[e+1][r])<Y})).reduce((function(n,t){return n&&t}),!0)})).reduce((function(n,t){return n&&t}),!0)&&Array.from(Array(n.length-1)).map((function(t,r){return n[0].length===n[r+1].length})).reduce((function(n,t){return n&&t}),!0)},equivalent:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=z(t);if(e.length<1)return!1;var i=d(e[0]);if("undefined"===i)return!1;switch(i){case"number":return H(e,B);case"boolean":case"string":return H(e,$);case"object":return e[0].constructor===Array?V.apply(void 0,y(e)):(console.warn("comparing array of objects for equivalency by slow JSON.stringify with no epsilon check"),H(e,(function(n,t){return JSON.stringify(n)===JSON.stringify(t)})));default:console.warn("incapable of determining comparison method")}return!1}}),Q=function(n,t,r,e,i){var o=function(n,t){return n[0]*t[1]-t[0]*n[1]},u=o(t,e),c=-u,a=o([r[0]-n[0],r[1]-n[1]],e),f=o([n[0]-r[0],n[1]-r[1]],t);return!(Math.abs(u)<Y)&&i(a/u,f/c)},W=function(n,t){return n>=-Y&&n<=1+Y&&t>=-Y&&t<=1+Y},nn=function(n,t,r,e){var i=[t[0]-n[0],t[1]-n[1]],o=[e[0]-r[0],e[1]-r[1]];return Q(n,i,r,o,W)},tn=function(n){return Math.abs(n.reduce((function(n,t){return n+t}),0))<Y},rn=function(n,r){return 1-Math.abs(o(t(n),t(r)))<Y},en=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y,i=[r[0]-n[0],r[1]-n[1]],o=i[0]*t[1]-i[1]*t[0];return Math.abs(o)<e},on=function(n,t){for(var r=!1,e=0,i=t.length-1;e<t.length;i=e++)t[e][1]>n[1]!=t[i][1]>n[1]&&n[0]<(t[i][0]-t[e][0])*(n[1]-t[e][1])/(t[i][1]-t[e][1])+t[e][0]&&(r=!r);return r},un=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;return null!=t&&t.length>0&&t.map((function(t,e,i){var o=i[(e+1)%i.length],u=[o[0]-t[0],o[1]-t[1]],c=[n[0]-t[0],n[1]-t[1]];return u[0]*c[1]-u[1]*c[0]>-r})).map((function(n,t,r){return n===r[0]})).reduce((function(n,t){return n&&t}),!0)},cn=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;return null!=t&&t.length>0&&t.map((function(t,e,i){var o=i[(e+1)%i.length],u=[o[0]-t[0],o[1]-t[1]],c=[n[0]-t[0],n[1]-t[1]];return u[0]*c[1]-u[1]*c[0]>r})).map((function(n,t,r){return n===r[0]})).reduce((function(n,t){return n&&t}),!0)},an=function(n,t){for(var r=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})),e=t.map((function(n,t,r){return[n,r[(t+1)%r.length]]})),i=0;i<r.length;i+=1)for(var o=0;o<e.length;o+=1)if(nn(r[i][0],r[i][1],e[o][0],e[o][1]))return!0;return!!on(t[0],n)||!!on(n[0],t)},fn=function(n,t,r){for(;r<t;)r+=2*Math.PI;for(;n<t;)n+=2*Math.PI;return n<r},sn=Object.freeze({__proto__:null,overlap_function:Q,segment_segment_overlap:nn,degenerate:tn,parallel:rn,point_on_line:en,point_on_segment:function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y,i=[n[0]-t[0],n[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]],u=[t[0]-r[0],t[1]-r[1]],c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),f=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return Math.abs(c-a-f)<e},point_in_poly:on,point_in_convex_poly:un,point_in_convex_poly_exclusive:cn,convex_polygons_overlap:an,convex_polygon_is_enclosed:function(n,t){if(t.map((function(t){return un(t,n)})).reduce((function(n,t){return n||t}),!1))return!1},convex_polygons_enclose:function(n,t){var r=t.map((function(t){return un(t,n)})).reduce((function(n,t){return n||t}),!1),e=n.map((function(t){return un(t,n)})).reduce((function(n,t){return n&&t}),!0);return!r&&e},is_counter_clockwise_between:fn}),ln=function(){return!0},hn=function(n,t){return t>=-Y},pn=function(n,t){return t>=-Y&&t<=1+Y},vn=function(n,t){return n>=-Y&&t>=-Y},gn=function(n,t){return n>=-Y&&t>=-Y&&t<=1+Y},mn=function(n,t){return n>=-Y&&n<=1+Y&&t>=-Y&&t<=1+Y},dn=function(n,t){return t>Y},_n=function(n,t){return t>Y&&t<1-Y},yn=function(n,t){return n>Y&&t>Y},Mn=function(n,t){return n>Y&&t>Y&&t<1-Y},bn=function(n,t){return n>Y&&n<1-Y&&t>Y&&t<1-Y},xn=function(n,t,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y,i=f(n.vector,t.vector);if(!(Math.abs(i)<e)){var o=-i,u=f([t.origin[0]-n.origin[0],t.origin[1]-n.origin[1]],t.vector),c=f([n.origin[0]-t.origin[0],n.origin[1]-t.origin[1]],n.vector),a=u/i,s=c/o;return r(a,s,e)?[n.origin[0]+n.vector[0]*a,n.origin[1]+n.vector[1]*a]:void 0}},wn=Object.freeze({__proto__:null,comp_l_l:ln,comp_l_r:hn,comp_l_s:pn,comp_r_r:vn,comp_r_s:gn,comp_s_s:mn,exclude_l_r:dn,exclude_l_s:_n,exclude_r_r:yn,exclude_r_s:Mn,exclude_s_s:bn,intersect:xn}),An=function(n,t){for(;n<0;)n+=2*Math.PI;for(;t<0;)t+=2*Math.PI;var r=t-n;return r>=0?r:2*Math.PI-(n-t)},Pn=function(n,t){var r=n[0]*t[0]+n[1]*t[1],e=n[0]*t[1]-n[1]*t[0],i=Math.atan2(e,r);return i<0&&(i+=2*Math.PI),i},jn=function(n,r){var i=t(n),u=t(r);return o(i,u)<-1+Y?[-i[1],i[0]]:t(e(i,u))},On=function(n,t,r,e){var i=n[0]*r[1]-r[0]*n[1];if(Math.abs(i)<Y){var o=[[n[0],n[1]],u(t,e)],c=[o,o];return delete c[n[0]*r[0]+n[1]*r[1]>0?1:0],c}var a=((e[0]-t[0])*r[1]-r[0]*(e[1]-t[1]))/i,f=[t[0]+n[0]*a,t[1]+n[1]*a],s=[jn(n,r)];return s[1]=p(s[0]),s.map((function(n){return{vector:n,origin:f}}))},In=function(n,t,r){var e=Pn(t,r)/n;return Array.from(Array(n-1)).map((function(n,r){return t+e*r}))},kn=function(n,t,r){var e=t[0]-n[0],i=t[1]-n[1],o=r[0]-n[0],u=r[1]-n[1],c=e*(n[0]+t[0])+i*(n[1]+t[1]),a=o*(n[0]+r[0])+u*(n[1]+r[1]),f=2*(e*(r[1]-t[1])-i*(r[0]-t[0]));if(Math.abs(f)<Y){var s=Math.min(n[0],t[0],r[0]),l=Math.min(n[1],t[1],r[1]),h=.5*(Math.max(n[0],t[0],r[0])-s),p=.5*(Math.max(n[1],t[1],r[1])-l);return{origin:[s+h,l+p],radius:Math.sqrt(h*h+p*p)}}var v=[(u*c-i*a)/f,(e*a-o*c)/f],g=v[0]-n[0],m=v[1]-n[1];return{origin:v,radius:Math.sqrt(g*g+m*m)}},Sn=function(n){return.5*n.map((function(n,t,r){var e=r[(t+1)%r.length];return n[0]*e[1]-e[0]*n[1]})).reduce((function(n,t){return n+t}),0)},qn=function(n){var t=1/(6*Sn(n));return n.map((function(n,t,r){var e=r[(t+1)%r.length],i=n[0]*e[1]-e[0]*n[1];return[(n[0]+e[0])*i,(n[1]+e[1])*i]})).reduce((function(n,t){return[n[0]+t[0],n[1]+t[1]]}),[0,0]).map((function(n){return n*t}))},zn=function(n){var t=Array(n[0].length).fill(1/0),r=Array(n[0].length).fill(-1/0);n.forEach((function(n){return n.forEach((function(n,e){n<t[e]&&(t[e]=n),n>r[e]&&(r[e]=n)}))}));var e=r.map((function(n,r){return n-t[r]}));return T.apply(void 0,y(e).concat(y(t)))},En=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=2*Math.PI/n/2,o=e/Math.cos(i);return Array.from(Array(Math.floor(n))).map((function(e,u){var c=-2*Math.PI*u/n+i;return[S(t+o*Math.sin(c),14),S(r+o*Math.cos(c),14)]}))},Nn=function(n,t,r,e){var i=r,o=[e[0]-r[0],e[1]-r[1]];return xn(t,n,i,o,_n)},Gn=function(n,t,r){var e=n.map((function(n,e){return{type:"v",point:en(r,t,n)?n:null,at_index:e}})).filter((function(n){return null!=n.point})),i=n.map((function(n,e,i){return{type:"e",point:Nn(t,r,n,i[(e+1)%i.length]),at_index:e}})).filter((function(n){return null!=n.point})),o=e.concat(i).sort((function(n,t){return Math.abs(n.point[0]-t.point[0])<Y?n.point[1]-t.point[1]:n.point[0]-t.point[0]}));return console.log(o),n},Fn=function(n,t,r){var e=n.map((function(n,e){return{point:en(r,t,n)?n:null,at_index:e}})).filter((function(n){return null!=n.point})),i=n.map((function(n,e,i){return{point:Nn(t,r,n,i[(e+1)%i.length]),at_index:e}})).filter((function(n){return null!=n.point}));if(2==i.length){var o=i.slice().sort((function(n,t){return n.at_index-t.at_index})),u=n.slice(o[1].at_index+1).concat(n.slice(0,o[0].at_index+1));u.push(o[0].point),u.push(o[1].point);var c=n.slice(o[0].at_index+1,o[1].at_index+1);return c.push(o[1].point),c.push(o[0].point),[u,c]}if(1==i.length&&1==e.length){e[0].type="v",i[0].type="e";var a=e.concat(i).sort((function(n,t){return n.at_index-t.at_index})),f=n.slice(a[1].at_index+1).concat(n.slice(0,a[0].at_index+1));"e"===a[0].type&&f.push(a[0].point),f.push(a[1].point);var s=n.slice(a[0].at_index+1,a[1].at_index+1);return"e"===a[1].type&&s.push(a[1].point),s.push(a[0].point),[f,s]}if(2==e.length){var l=e.slice().sort((function(n,t){return n.at_index-t.at_index}));return[n.slice(l[1].at_index).concat(n.slice(0,l[0].at_index+1)),n.slice(l[0].at_index,l[1].at_index+1)]}return[n.slice()]},Dn=function(n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y,r=1e4,e=n.slice().sort((function(n,r){return Math.abs(n[1]-r[1])<t?n[0]-r[0]:n[1]-r[1]})),i=[];i.push(e[0]);var o=0,u=0,c=function(){u+=1;var n=i.length-1,r=e.filter((function(r){return!(Math.abs(r[0]-i[n][0])<t&&Math.abs(r[1]-i[n][1])<t)})).map((function(t){for(var r=Math.atan2(i[n][1]-t[1],i[n][0]-t[0]);r<o;)r+=2*Math.PI;return{node:t,angle:r,distance:void 0}})).sort((function(n,t){return n.angle<t.angle?-1:n.angle>t.angle?1:0}));if(0===r.length)return{v:void 0};var c=r[0];if(r=r.filter((function(n){return Math.abs(c.angle-n.angle)<t})).map((function(t){var r=Math.sqrt(Math.pow(i[n][0]-t.node[0],2)+Math.pow(i[n][1]-t.node[1],2));return t.distance=r,t})).sort((function(n,t){return n.distance<t.distance?1:n.distance>t.distance?-1:0})),i.filter((function(n){return n===r[0].node})).length>0)return{v:i};i.push(r[0].node),o=Math.atan2(i[n][1]-r[0].node[1],i[n][0]-r[0].node[0])};do{var a=c();if("object"===d(a))return a.v}while(u<r)},Tn=Object.freeze({__proto__:null,clockwise_angle2_radians:function(n,t){for(;n<0;)n+=2*Math.PI;for(;t<0;)t+=2*Math.PI;var r=n-t;return r>=0?r:2*Math.PI-(t-n)},counter_clockwise_angle2_radians:An,clockwise_angle2:function(n,t){var r=t[0]*n[0]+t[1]*n[1],e=t[0]*n[1]-t[1]*n[0],i=Math.atan2(e,r);return i<0&&(i+=2*Math.PI),i},counter_clockwise_angle2:Pn,counter_clockwise_vector_order:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=t.map((function(n){return Math.atan2(n[1],n[0])})),i=Array.from(Array(e.length)).map((function(n,t){return t})).sort((function(n,t){return e[n]-e[t]}));return i.slice(i.indexOf(0),i.length).concat(i.slice(0,i.indexOf(0)))},interior_angles2:function(n,t){var r=Pn(n,t);return[r,2*Math.PI-r]},interior_angles:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.map((function(n,t,r){return Pn(n,r[(t+1)%r.length])}))},bisect_vectors:jn,bisect_lines2:On,subsect_radians:In,subsect:function(n,t,r){var e=Math.atan2(t[1],t[0]),i=Math.atan2(r[1],r[0]);return In(n,e,i).map((function(n){return[Math.cos(n),Math.sin(n)]}))},circumcircle:kn,signed_area:Sn,centroid:qn,enclosing_rectangle:zn,make_regular_polygon:En,split_polygon:Gn,split_convex_polygon:Fn,convex_hull:Dn}),Zn=Object.freeze({__proto__:null,lerp:function(n,t,r){return n*(1-r)+t*r},cosine:function(n,t,r){var e=(1-Math.cos(r*Math.PI))/2;return n*(1-e)+t*e},cubic:function(n,t,r,e,i){var o=i*i,u=e-r-n+t;return u*i*o+(n-t-u)*o+(r-n)*i+t},catmull_rom:function(n,t,r,e,i){var o=i*i;return(-.5*n+1.5*t-1.5*r+.5*e)*i*o+(n-2.5*t+2*r-.5*e)*o+(-.5*n+.5*r)*i+t},hermite:function(n,t,r,e,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=i*i,a=c*i,f=(t-n)*(1+u)*(1-o)/2,s=(r-t)*(1+u)*(1-o)/2,l=2*a-3*c+1,h=a-2*c+i,p=a-c,v=-2*a+3*c;return l*t+h*(f+=(r-t)*(1-u)*(1-o)/2)+p*(s+=(e-r)*(1-u)*(1-o)/2)+v*r}}),Ln=function(n){return n[0]*n[3]-n[1]*n[2]},Rn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.cos(n),e=Math.sin(n);return[r,e,-e,r,t[0],t[1]]},Jn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.atan2(n[1],n[0]),e=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),u=Math.sin(-r),c=e*o+i*u,a=e*-u+i*o,f=i*o+-e*u,s=i*-u+-e*o,l=t[0]+c*-t[0]+-t[1]*f,h=t[1]+a*-t[0]+-t[1]*s;return[c,a,f,s,l,h]},Cn=Object.freeze({__proto__:null,multiply_matrix2_vector2:function(n,t){return[n[0]*t[0]+n[2]*t[1]+n[4],n[1]*t[0]+n[3]*t[1]+n[5]]},multiply_matrix2_line2:function(n,t,r){return{vector:[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1]],origin:[n[0]*r[0]+n[2]*r[1]+n[4],n[1]*r[0]+n[3]*r[1]+n[5]]}},multiply_matrices2:function(n,t){return[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],n[0]*t[4]+n[2]*t[5]+n[4],n[1]*t[4]+n[3]*t[5]+n[5]]},determinant2:Ln,invert_matrix2:function(n){var t=Ln(n);if(!(Math.abs(t)<1e-6||isNaN(t))&&isFinite(n[4])&&isFinite(n[5]))return[n[3]/t,-n[1]/t,-n[2]/t,n[0]/t,(n[2]*n[5]-n[3]*n[4])/t,(n[1]*n[4]-n[0]*n[5])/t]},make_matrix2_translate:function(n,t){return[1,0,0,1,n,t]},make_matrix2_scale:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return[n,0,0,t,n*-r[0]+r[0],t*-r[1]+r[1]]},make_matrix2_rotate:Rn,make_matrix2_reflection:Jn}),Un=function(n,t){return[n[0]*t[0]+n[3]*t[1]+n[6]*t[2]+n[9],n[1]*t[0]+n[4]*t[1]+n[7]*t[2]+n[10],n[2]*t[0]+n[5]*t[1]+n[8]*t[2]+n[11]]},Xn=function(n,t,r){return{vector:[n[0]*t[0]+n[3]*t[1]+n[6]*t[2],n[1]*t[0]+n[4]*t[1]+n[7]*t[2],n[2]*t[0]+n[5]*t[1]+n[8]*t[2]],origin:[n[0]*r[0]+n[3]*r[1]+n[6]*r[2]+n[9],n[1]*r[0]+n[4]*r[1]+n[7]*r[2]+n[10],n[2]*r[0]+n[5]*r[1]+n[8]*r[2]+n[11]]}},Yn=function(n,t){return[n[0]*t[0]+n[3]*t[1]+n[6]*t[2],n[1]*t[0]+n[4]*t[1]+n[7]*t[2],n[2]*t[0]+n[5]*t[1]+n[8]*t[2],n[0]*t[3]+n[3]*t[4]+n[6]*t[5],n[1]*t[3]+n[4]*t[4]+n[7]*t[5],n[2]*t[3]+n[5]*t[4]+n[8]*t[5],n[0]*t[6]+n[3]*t[7]+n[6]*t[8],n[1]*t[6]+n[4]*t[7]+n[7]*t[8],n[2]*t[6]+n[5]*t[7]+n[8]*t[8],n[0]*t[9]+n[3]*t[10]+n[6]*t[11]+n[9],n[1]*t[9]+n[4]*t[10]+n[7]*t[11]+n[10],n[2]*t[9]+n[5]*t[10]+n[8]*t[11]+n[11]]},$n=function(n){return n[0]*n[4]*n[8]-n[0]*n[7]*n[5]-n[3]*n[1]*n[8]+n[3]*n[7]*n[2]+n[6]*n[1]*n[5]-n[6]*n[4]*n[2]},Bn=function(n){var t=$n(n);if(!(Math.abs(t)<1e-6||isNaN(t))&&isFinite(n[9])&&isFinite(n[10])&&isFinite(n[11])){var r=[n[4]*n[8]-n[7]*n[5],-n[1]*n[8]+n[7]*n[2],n[1]*n[5]-n[4]*n[2],-n[3]*n[8]+n[6]*n[5],n[0]*n[8]-n[6]*n[2],-n[0]*n[5]+n[3]*n[2],n[3]*n[7]-n[6]*n[4],-n[0]*n[7]+n[6]*n[1],n[0]*n[4]-n[3]*n[1],-n[3]*n[7]*n[11]+n[3]*n[8]*n[10]+n[6]*n[4]*n[11]-n[6]*n[5]*n[10]-n[9]*n[4]*n[8]+n[9]*n[5]*n[7],n[0]*n[7]*n[11]-n[0]*n[8]*n[10]-n[6]*n[1]*n[11]+n[6]*n[2]*n[10]+n[9]*n[1]*n[8]-n[9]*n[2]*n[7],-n[0]*n[4]*n[11]+n[0]*n[5]*n[10]+n[3]*n[1]*n[11]-n[3]*n[2]*n[10]-n[9]*n[1]*n[5]+n[9]*n[2]*n[4]],e=1/t;return r.map((function(n){return n*e}))}},Hn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[1,0,0,0,1,0,0,0,1,n,t,r]},Vn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=Math.cos(n),e=Math.sin(n);return[1,0,0,0,r,e,0,-e,r,t[0]||0,t[1]||0,t[2]||0]},Kn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=Math.cos(n),e=Math.sin(n);return[r,0,-e,0,1,0,e,0,r,t[0]||0,t[1]||0,t[2]||0]},Qn=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=Math.cos(n),e=Math.sin(n);return[r,e,0,-e,r,0,0,0,1,t[0]||0,t[1]||0,t[2]||0]},Wn=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],i=t(r),o=Array.from(Array(3)).map((function(n,t){return e[t]||0})),u=_(i,3),c=u[0],a=u[1],f=u[2],s=Math.cos(n),l=Math.sin(n),h=Math.sqrt(i[1]*i[1]+i[2]*i[2]),p=Math.abs(h)<1e-6?0:a/h,v=Math.abs(h)<1e-6?1:f/h,g=[1,0,0,0,1,0,0,0,1,o[0],o[1],o[2]],m=[1,0,0,0,1,0,0,0,1,-o[0],-o[1],-o[2]],d=[1,0,0,0,v,p,0,-p,v,0,0,0],y=[1,0,0,0,v,-p,0,p,v,0,0,0],M=[h,0,c,0,1,0,-c,0,h,0,0,0],b=[h,0,-c,0,1,0,c,0,h,0,0,0],x=[s,l,0,-l,s,0,0,0,1,0,0,0];return Yn(m,Yn(y,Yn(b,Yn(x,Yn(M,Yn(d,g))))))},nt=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[n,0,0,0,n,0,0,0,n,n*-t[0]+t[0],n*-t[1]+t[1],n*-t[2]+t[2]]},tt=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=Math.atan2(n[1],n[0]),e=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),u=Math.sin(-r),c=e*o+i*u,a=e*-u+i*o,f=i*o+-e*u,s=i*-u+-e*o,l=t[0]+c*-t[0]+-t[1]*f,h=t[1]+a*-t[0]+-t[1]*s;return[c,a,0,f,s,0,0,0,0,l,h,0]},rt=Object.freeze({__proto__:null,multiply_matrix3_vector3:Un,multiply_matrix3_line3:Xn,multiply_matrices3:Yn,determinant3:$n,invert_matrix3:Bn,make_matrix3_translate:Hn,make_matrix3_rotateX:Vn,make_matrix3_rotateY:Kn,make_matrix3_rotateZ:Qn,make_matrix3_rotate:Wn,make_matrix3_scale:nt,make_matrix3_reflectionZ:tt,make_matrix3_reflection:function(n){return[]}}),et=function(n,t,r){for(var e,i=t.map((function(t,e){return{o:t,i:e,d:r(n,t)}})),o=1/0,u=0;u<i.length;u+=1)i[u].d<o&&(e=u,o=i[u].d);return e},it=function(n,t,r,e){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Y,o=Math.pow(n[0],2)+Math.pow(n[1],2),u=[0,1].map((function(n,e){return r[e]-t[e]})),c=[0,1].map((function(t,r){return n[r]*u[r]})).reduce((function(n,t){return n+t}),0),a=c/o,f=e(a,i);return[0,1].map((function(r,e){return t[e]+n[e]*f}))},ot=function(n){return n<-Y?0:n>1+Y?1:n},ut=function(n,o,u){return e(n,r(t(i(u,n)),o))},ct=function(){return!1},at=Object.freeze({__proto__:null,nearest_point2:function(n,t){var r=et(n,t,l);return void 0===r?void 0:t[r]},nearest_point:function(n,t){var r=et(n,t,h);return void 0===r?void 0:t[r]},nearest_point_on_line:it,nearest_point_on_polygon:function(n,t){var r=n.map((function(n,t,r){return i(r[(t+1)%r.length],n)}));return n.map((function(n,e){return it(r[e],n,t,ot)})).map((function(n,r){return{point:n,i:r,distance:h(n,t)}})).sort((function(n,t){return n.distance-t.distance})).shift()},nearest_point_on_circle:ut,nearest_point_on_ellipse:ct}),ft=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return[0,1].map((function(n){return t.filter((function(t,r){return r%2===n})).reduce((function(n,t){return n+t}),0)}))},st=function(){return ft.apply(void 0,arguments).map((function(n){return n<0?n+2*Math.PI:n})).map((function(n){return Math.PI-n}))},lt=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.map((function(n,t,r){return An(n,r[(t+1)%r.length])})).map((function(n,t,r){return r.slice(t+1,r.length).concat(r.slice(0,t))})).map((function(n){return st.apply(void 0,y(n))})).map((function(n,r){return t[r]+n[0]})).map((function(n,r){return fn(n,t[r],t[(r+1)%t.length])?n:void 0}))},ht=Object.freeze({__proto__:null,alternating_sum:ft,kawasaki_sector_score:st,kawasaki_solutions_radians:lt,kawasaki_solutions:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=t.map((function(n){return Math.atan2(n[1],n[0])}));return lt.apply(void 0,y(e)).map((function(n){return void 0===n?void 0:[S(Math.cos(n),14),S(Math.sin(n),14)]}))}}),pt=function(n){return n>=1?0:n<=-1?Math.PI:Math.acos(n)},vt=function(n,t,r){var e=t[0]-n[0],i=t[1]-n[1],o=e*Math.cos(r)+i*Math.sin(r),u=i*Math.cos(r)-e*Math.sin(r);return[n[0]+o,n[1]+u]},gt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y,e=n.radius<t.radius?n.radius:t.radius,i=n.radius<t.radius?t.radius:n.radius,o=n.radius<t.radius?n.origin:t.origin,u=n.radius<t.radius?t.origin:n.origin,c=[o[0]-u[0],o[1]-u[1]],a=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2));if(!(a<r)){var f=c.map((function(n,t){return n/a*i+u[t]}));if(Math.abs(i+e-a)<r||Math.abs(i-(e+a))<r)return[f];if(!(a+e<i||i+e<a)){var s=pt((e*e-a*a-i*i)/(-2*a*i)),l=vt(u,f,+s),h=vt(u,f,-s);return[l,h]}}},mt=function(n,t,r,e,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Y,u=Math.pow(r[0],2)+Math.pow(r[1],2),c=Math.sqrt(u),a=0===c?r:r.map((function(n){return n/c})),f=[-a[1],a[0]],s=[e[0]-t[0],e[1]-t[1]],l=s[0]*a[1]-a[0]*s[1];if(!(Math.abs(l)>n+o)){var h=Math.sqrt(Math.pow(n,2)-Math.pow(l,2)),p=function(n,r){return t[r]-f[r]*l+a[r]*n},v=Math.abs(n-Math.abs(l))<o?[h].map((function(n){return[n,n].map(p)})):[-h,h].map((function(n){return[n,n].map(p)})),g=v.map((function(n){return n.map((function(n,t){return n-e[t]}))})).map((function(n){return n[0]*r[0]+r[1]*n[1]})).map((function(n){return n/u}));return v.filter((function(n,t){return i(g[t],o)}))}},dt=function(){return!0},_t=function(n,t){return n>-t},yt=function(n,t){return n>-t&&n<1+t},Mt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;return mt(n.radius,n.origin,t.vector,t.origin,dt,r)},bt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;return mt(n.radius,n.origin,t.vector,t.origin,_t,r)},xt=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;return mt(n.radius,n.origin,t.vector,t.origin,yt,r)},wt=Object.freeze({__proto__:null,circle_circle:gt,circle_line:Mt,circle_ray:bt,circle_segment:xt}),At=function(n,t){return Math.abs(n[0]-t[0])<Y&&Math.abs(n[1]-t[1])<Y},Pt=function(n,t,r){var e=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return function(n,t,r,e){var i={origin:n,vector:t},o={origin:r,vector:[[e[0]-r[0]],[e[1]-r[1]]]};return xn(i,o,pn)}(r,t,n[0],n[1])})).filter((function(n){return null!=n}));switch(e.length){case 0:return;case 1:return[e[0],e[0]];case 2:return e;default:for(var i=1;i<e.length;i+=1)if(!At(e[0],e[i]))return[e[0],e[i]];return}},jt=function(n,t,r){var e=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return ray_segment(r,t,n[0],n[1])})).filter((function(n){return null!=n}));switch(e.length){case 0:return;case 1:return[r,e[0]];case 2:return e;default:for(var i=1;i<e.length;i+=1)if(!At(e[0],e[i]))return[e[0],e[i]];return}},Ot=function(n,t,r){var e=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return segment_segment_exclusive(t,r,n[0],n[1])})).filter((function(n){return null!=n})),i=cn(t,n),o=cn(r,n),u=un(t,n),c=un(r,n);if(0===e.length&&(i||o))return[t,r];if(0===e.length&&u&&c)return[t,r];switch(e.length){case 0:return i?[y(t),y(r)]:void 0;case 1:return u?[y(t),e[0]]:[y(r),e[0]];case 2:return e;default:throw new Error("clipping segment in a convex polygon resulting in 3 or more points")}},It=Object.freeze({__proto__:null,determ2:function(n,t){return n[0]*t[1]-t[0]*n[1]},convex_poly_circle:function(n,t,r){return[]},convex_poly_line:Pt,convex_poly_ray:jt,convex_poly_segment:Ot,convex_poly_ray_exclusive:function(n,t,r){var e=n.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return ray_segment_exclusive(r,t,n[0],n[1])})).filter((function(n){return null!=n}));switch(e.length){case 0:return;case 1:return[r,e[0]];case 2:return e;default:for(var i=1;i<e.length;i+=1)if(!At(e[0],e[i]))return[e[0],e[i]];return}}}),kt={circle:{circle:gt,line:Mt,ray:bt,segment:xt},line:{poly:function(n,t){return Pt(t,n)},circle:function(n,t){return Mt(t,n)},line:function(n,t){return xn(n,t,ln)},ray:function(n,t,r){return xn(n,t,!1===r?dn:hn)},segment:function(n,t,r){return xn(n,t,!1===r?_n:pn)}},ray:{poly:function(n,t){return jt(t,n)},circle:function(n,t){return bt(t,n)},line:function(n,t,r){return xn(t,n,!1===r?dn:hn)},ray:function(n,t,r){return xn(n,t,!1===r?yn:vn)},segment:function(n,t,r){return xn(n,t,!1===r?Mn:gn)}},segment:{poly:function(n,t){return Ot(t,n)},circle:function(n,t){return xt(t,n)},line:function(n,t,r){return xn(t,n,!1===r?_n:pn)},ray:function(n,t,r){return xn(t,n,!1===r?Mn:gn)},segment:function(n,t,r){return xn(n,t,!1===r?bn:mn)}}},St=function(n,t){var r=P(n),e=P(t);return(0,kt[r][e])(n,t)},qt={preserve:{magnitude:function(){return n(this)},isEquivalent:function(){return V(this,N(arguments))},isParallel:function(){return rn.apply(void 0,y(I(this,N(arguments))))},dot:function(){return o.apply(void 0,y(I(this,N(arguments))))},distanceTo:function(){return h.apply(void 0,y(I(this,N(arguments))))}},vector:{copy:function(){return y(this)},normalize:function(){return t(this)},scale:function(){return r(this,arguments[0])},flip:function(){return v(this)},rotate90:function(){return p(this)},rotate270:function(){return g(this)},cross:function(){return s(O(3,this),O(3,N(arguments)))},transform:function(){return Un(U(arguments),O(3,this))},add:function(){return e(this,O(this.length,N(arguments)))},subtract:function(){return i(this,O(this.length,N(arguments)))},rotateZ:function(n,t){return Un(U(Rn(n,t)),this)},lerp:function(n,t){return a(this,O(this.length,N(n)),t)},midpoint:function(){return u.apply(void 0,y(I(this,N(arguments))))},bisect:function(){return jn(this,N(arguments))}}},zt={};Object.keys(qt.preserve).forEach((function(n){zt[n]=qt.preserve[n]})),Object.keys(qt.vector).forEach((function(n){zt[n]=function(){return x.vector.apply(x,y(qt.vector[n].apply(this,arguments)))}}));var Et={fromAngle:function(n){return x.vector(Math.cos(n),Math.sin(n))},fromAngleDegrees:function(n){return x.vector.fromAngle(n*A)}},Nt={vector:{P:Array.prototype,A:function(){var n=this;N(arguments).forEach((function(t){return n.push(t)}))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:zt,S:Et}},Gt=function(){};Gt.prototype.isParallel=function(){var n=I(this.vector,D.apply(void 0,arguments).vector);return console.log(arguments,this.vector,D.apply(void 0,arguments).vector,n),rn.apply(void 0,y(n))},Gt.prototype.isDegenerate=function(){return tn(this.vector)},Gt.prototype.reflection=function(){return x.matrix(Jn(this.vector,this.origin))},Gt.prototype.nearestPoint=function(){var n=N(arguments);return x.vector(it(this.vector,this.origin,n,this.clip_function))},Gt.prototype.transform=function(){var n=this.dimension,t=Xn(U(arguments),O(3,this.vector),O(3,this.origin));return this.constructor(O(n,t.vector),O(n,t.origin))},Gt.prototype.intersect=function(n){return St(this,n)},Gt.prototype.bisect=function(){var n=D(arguments);return On(this.vector,this.origin,n.vector,n.origin)},Object.defineProperty(Gt.prototype,"dimension",{get:function(){return[this.vector,this.origin].map((function(n){return n.length})).reduce((function(n,t){return Math.max(n,t)}),0)}});var Ft={fromPoints:function(){var n=G(arguments);return this.constructor({vector:i(n[1],n[0]),origin:n[0]})},perpendicularBisector:function(){var n=G(arguments);return this.constructor({vector:p(i(n[1],n[0])),origin:c(n[0],n[1])})}},Dt={line:{P:Gt.prototype,A:function(){var n=D.apply(void 0,arguments);this.vector=x.vector(n.vector),this.origin=x.vector(n.origin)},G:{length:function(){return 1/0}},M:{clip_function:function(n){return n}},S:Ft}},Tt={ray:{P:Gt.prototype,A:function(){var n=D.apply(void 0,arguments);this.vector=x.vector(n.vector),this.origin=x.vector(n.origin)},G:{length:function(){return 1/0}},M:{rotate180:function(){return x.ray(this.origin[0],this.origin[1],-this.vector[0],-this.vector[1])},clip_function:function(n){return n<-Y?0:n}},S:Ft}},Zt={segment:{P:Gt.prototype,A:function(){this.points=F.apply(void 0,arguments).map((function(n){return x.vector(n)})),this.vector=this.points[1].subtract(this.points[0]),this.origin=this.points[0]},G:{0:function(){return this.points[0]},1:function(){return this.points[1]},length:function(){return this.vector.magnitude()}},M:{clip_function:function(n){return n<-Y?0:n>1+Y?1:n},transform:function(){for(var n=this.dimension,t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var i=U(r),o=this.points.map((function(n){return O(3,n)})).map((function(n){return Un(i,n)})).map((function(t){return O(n,t)}));return x.segment(o)},scale:function(n){var t=c(this.points[0],this.points[1]),r=this.points.map((function(r){return r.lerp(t,n)}));return x.segment(r)},midpoint:function(){return x.vector(c(this.points[0],this.points[1]))}},S:{fromPoints:function(){return this.constructor.apply(this,arguments)}}}},Lt=function(n){return S(n,4)},Rt=function(n,t){return"A".concat(Lt(n)," ").concat(Lt(n)," 0 0 0 ").concat(Lt(t[0])," ").concat(Lt(t[1]))},Jt=function(n,t,r){return[n[0]+t*Math.cos(r),n[1]+t*Math.sin(r)]},Ct={circle:{A:function(){var n=G(arguments),t=O(3,E(arguments));2===n.length?(this.radius=l.apply(void 0,y(n)),this.origin=x.vector.apply(x,y(n[0]))):(this.radius=t[0],this.origin=x.vector(t[1],t[2]))},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{nearestPoint:function(){return x.vector(ut(this.origin,this.radius,N(arguments)))},intersect:function(n){return St(this,n)},path:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,r=n+t/2,e=Jt(this.origin,this.radius,n),i=Jt(this.origin,this.radius,r),o=Jt(this.origin,this.radius,n+t),u=Rt(this.radius,i),c=Rt(this.radius,o);return"M".concat(Lt(e[0])," ").concat(Lt(e[1])).concat(u).concat(c)}},S:{fromPoints:function(){return this.constructor.apply(this,arguments)},fromThreePoints:function(){var n=kn.apply(void 0,arguments);return this.constructor.apply(this,y(n.origin).concat([n.radius]))}}}},Ut=function(n,t,r,e,i,o){var u=Math.cos(i),c=Math.sin(i),a=Math.cos(o),f=Math.sin(o);return[n+u*r*a+-c*e*f,t+c*r*a+u*e*f]},Xt=function(n,t,r,e,i,o,u){var c=o;if(c<0&&!isNaN(c))for(;c<0;)c+=2*Math.PI;var a=u>2*Math.PI?2*Math.PI:u,f=Ut(n,t,r,e,i,c),s=Ut(n,t,r,e,i,c+a/2),l=Ut(n,t,r,e,i,c+a),h=a/2>Math.PI?1:0,p=a/2>0?1:0;return{x1:f[0],y1:f[1],x2:s[0],y2:s[1],x3:l[0],y3:l[1],fa:h,fs:p}},Yt=function(n){return S(n,4)},$t=function(n,t,r,e,i,o,u){return"A".concat(Yt(n)," ").concat(Yt(t)," ").concat(Yt(r)," ").concat(Yt(e)," ").concat(Yt(i)," ").concat(Yt(o)," ").concat(Yt(u))},Bt=function(n,t,r,e){var i=t>r,o=i?Math.pow(t,2)-Math.pow(r,2):Math.pow(r,2)-Math.pow(t,2),u=Math.sqrt(o),c=i?Math.cos(e):Math.sin(e),a=i?Math.sin(e):Math.cos(e);return[x.vector(n[0]+u*c,n[1]+u*a),x.vector(n[0]-u*c,n[1]-u*a)]},Ht={ellipse:{A:function(){var n=E(arguments).filter((function(n){return!isNaN(n)})),t=O(5,n);this.rx=t[0],this.ry=t[1],this.origin=x.vector(t[2],t[3]),this.spin=t[4],this.foci=Bt(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{nearestPoint:function(){return x.vector((this.origin,this.radius,N(arguments),!1))},intersect:function(n){return St(this,n)},path:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,r=Xt(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,n,t),e=$t(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),i=$t(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return"M".concat(Yt(r.x1)," ").concat(Yt(r.y1)).concat(e).concat(i)}},S:{}}},Vt={area:function(){return Sn(this.points)},centroid:function(){return x.vector(qn(this.points))},enclosingRectangle:function(){return x.rect(zn(this.points))},contains:function(){return on(N(arguments),this.points)},scale:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn(this.points),r=this.points.map((function(n){return[0,1].map((function(r,e){return n[e]-t[e]}))})).map((function(r){return r.map((function(e,i){return t[i]+r[i]*n}))}));return this.constructor.fromPoints(r)},rotate:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn(this.points),r=this.points.map((function(r){var e=[r[0]-t[0],r[1]-t[1]],i=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),o=Math.atan2(e[1],e[0]);return[t[0]+Math.cos(o+n)*i,t[1]+Math.sin(o+n)*i]}));return x.polygon(r)},translate:function(){var n=N(arguments),t=this.points.map((function(t){return t.map((function(t,r){return t+n[r]}))}));return this.constructor.fromPoints(t)},transform:function(){var n=U(arguments),t=this.points.map((function(t){return Un(n,O(3,t))}));return x.polygon(t)},sectors:function(){return this.points.map((function(n,t,r){var e=(t+r.length-1)%r.length,i=(t+1)%r.length,o=n,u=r[e].map((function(n,t){return n-o[t]})),c=r[i].map((function(n,t){return n-o[t]}));return x.sector(c,u,o)}))},nearest:function(){var n,t=N(arguments),r=this.sides.map((function(n){return n.nearestPoint(t)})),e=1/0;return r.map((function(n){return l(t,n)})).forEach((function(t,r){t<e&&(e=t,n=r)})),{point:r[n],edge:this.sides[n]}},overlaps:function(){var n=z(arguments);return an(this.points,n)},split:function(){var n=D(arguments),t=this.convex?Fn:Gn;return t(this.points,n.vector,n.origin).map((function(n){return x.polygon(n)}))},clipSegment:function(){var n=F(arguments),t=Ot(this.points,n[0],n[1]);return void 0===t?void 0:x.segment(t)},clipLine:function(){var n=D(arguments),t=Pt(this.points,n.vector,n.origin);return void 0===t?void 0:x.segment(t)},clipRay:function(){var n=D(arguments),t=jt(this.points,n.vector,n.origin);return void 0===t?void 0:x.segment(t)},path:function(){var n=Array(this.points.length).fill("L");return n[0]="M","".concat(this.points.map((function(t,r){return"".concat(n[r]).concat(t[0],",").concat(t[1])})).join(""),"z")}},Kt=function(){this.points=[]};Object.keys(Vt).forEach((function(n){Kt.prototype[n]=Vt[n]}));var Qt=function(n){return[[n.x,n.y],[n.x+n.width,n.y],[n.x+n.width,n.y+n.height],[n.x,n.y+n.height]]},Wt={rect:{P:Kt.prototype,A:function(){var n=Z.apply(void 0,arguments);this.width=n.width,this.height=n.height,this.origin=x.vector(n.x,n.y),this.points=Qt(this)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{area:function(){return this.width*this.height}},S:{fromPoints:function(){return x.rect(zn(G(arguments)))}}}},nr={polygon:{P:Kt.prototype,A:function(){this.points=z(arguments).map((function(n){return x.vector(n)})),this.sides=this.points.map((function(n,t,r){return[n,r[(t+1)%r.length]]})).map((function(n){return x.segment(n[0][0],n[0][1],n[1][0],n[1][1])}))},G:{isConvex:function(){return!0}},M:{},S:{fromPoints:function(){return this.constructor.apply(this,arguments)},regularPolygon:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.constructor(En(n,t,r,e))},convexHull:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.constructor(Dn(n,t))}}}},tr={matrix:{P:Array.prototype,A:function(){var n=this;U(arguments).forEach((function(t){return n.push(t)}))},G:{},M:{multiply:function(){return x.matrix(Yn(this,U(arguments)).map((function(n){return S(n,13)})))},determinant:function(){return S($n(this),13)},inverse:function(){return x.matrix(Bn(this).map((function(n){return S(n,13)})))},translate:function(n,t,r){return x.matrix(Yn(this,Hn(n,t,r)).map((function(n){return S(n,13)})))},rotateX:function(n){return x.matrix(Yn(this,Vn(n)).map((function(n){return S(n,13)})))},rotateY:function(n){return x.matrix(Yn(this,Kn(n)).map((function(n){return S(n,13)})))},rotateZ:function(n){return x.matrix(Yn(this,Qn(n)).map((function(n){return S(n,13)})))},rotate:function(n,t,r){var e=Wn(n,t,r);return x.matrix(Yn(this,e).map((function(n){return S(n,13)})))},scale:function(n){return x.matrix(Yn(this,nt(n)).map((function(n){return S(n,13)})))},reflectZ:function(n,t){var r=tt(n,t);return x.matrix(Yn(this,r).map((function(n){return S(n,13)})))},transform:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return x.vector(Un(N(t),this).map((function(n){return S(n,13)})))},transformVector:function(n){return x.matrix(Un(this,n).map((function(n){return S(n,13)})))},transformLine:function(n,t){return x.matrix(Xn(this,n,t).map((function(n){return S(n,13)})))}},S:{}}},rr=Object.assign({},Nt,Dt,Tt,Zt,Ct,Ht,Wt,nr,tr),er=function(n,t){var r=Object.create(rr[n].proto);return rr[n].A.apply(r,t),Object.freeze(r)};Object.assign(x,{vector:function(){return er("vector",arguments)},circle:function(){return er("circle",arguments)},ellipse:function(){return er("ellipse",arguments)},rect:function(){return er("rect",arguments)},polygon:function(){return er("polygon",arguments)},line:function(){return er("line",arguments)},ray:function(){return er("ray",arguments)},segment:function(){return er("segment",arguments)},matrix:function(){return er("matrix",arguments)}}),Object.keys(rr).forEach((function(n){var t={};t.prototype=null!=rr[n].P?Object.create(rr[n].P):Object.create(Object.prototype),t.prototype.constructor=t,x[n].prototype=t.prototype,x[n].prototype.constructor=x[n],Object.keys(rr[n].G).forEach((function(r){return Object.defineProperty(t.prototype,r,{get:rr[n].G[r]})})),Object.keys(rr[n].M).forEach((function(r){return Object.defineProperty(t.prototype,r,{value:rr[n].M[r]})})),Object.keys(rr[n].S).forEach((function(t){return Object.defineProperty(x[n],t,{value:rr[n].S[t].bind(x[n].prototype)})})),Object.freeze(t.prototype),rr[n].proto=t.prototype}));var ir=x;return ir.core=Object.assign({},m,K,Tn,Zn,Cn,rt,at,ht,sn,X),ir.intersection=St,ir.intersection.circle=wt,ir.intersection.lines=wn,ir.intersection.polygon=It,ir}));
