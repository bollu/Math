!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).math=r()}(this,(function(){"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n(t,r)}(t)||function(){throw new TypeError("spread non-iterable")}()}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var e=function(t){return null!=t&&"function"==typeof t[Symbol.iterator]},o=function t(){for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];switch(o.length){case void 0:case 0:return o;case 1:return e(o[0])&&"string"!=typeof o[0]?t.apply(void 0,r(o[0])):[o[0]];default:return o.map((function(n){return e(n)?r(t(n)):n})).reduce((function(t,r){return t.concat(r)}),[])}},u=function(){var r=o(arguments);return r.length>0&&"object"===t(r[0])&&null!==r[0]&&!isNaN(r[0].x)&&(r=["x","y","z"].map((function(t){return r[0][t]})).filter((function(t){return void 0!==t}))),r.filter((function(t){return"number"==typeof t}))},i=function(t){return Math.sqrt(t.map((function(t){return t*t})).reduce((function(t,r){return t+r}),0))},c=function(t){var r=i(t);return 0===r?t:t.map((function(t){return t/r}))},f=function(t,r){return t.map((function(n,e){return t[e]*r[e]})).reduce((function(t,r){return t+r}),0)},a=function(t,r){return[t[1]*r[2]-t[2]*r[1],t[0]*r[2]-t[2]*r[0],t[0]*r[1]-t[1]*r[0]]},s=function(t,r){return 1-Math.abs(f(c(t),c(r)))<1e-6},p=function(t,r){var n=c(t),e=c(r),o=n.map((function(t,r){return n[r]+e[r]})),u=c(o),i=n.map((function(t,r){return-n[r]-e[r]}));return[u,c(i)]},h={},l={preserve:{magnitude:function(){return i(this)},isParallel:function(){var t=u(arguments),r=this.length<t.length?this:t,n=this.length<t.length?t:this;return s(r,n)},dot:function(){var t=u(arguments);return this.length>t.length?f(t,this):f(this,t)},distanceTo:function(){var t=this,r=u(arguments),n=this.length<r.length?this.length:r.length,e=Array.from(Array(n)).map((function(n,e){return Math.pow(t[e]-r[e],2)})).reduce((function(t,r){return t+r}),0);return Math.sqrt(e)},bisect:function(){var t=u(arguments);return p(this,t).map((function(t){return h.constructor(t)}))}},vector:{copy:function(){return r(this)},normalize:function(){return c(this)},scale:function(t){return this.map((function(r){return r*t}))},cross:function(){var t=u(arguments),r=this.slice();return null==r[2]&&(r[2]=0),null==t[2]&&(t[2]=0),a(r,t)},add:function(){var t=u(arguments);return this.map((function(r,n){return r+t[n]}))},subtract:function(){var t=u(arguments);return this.map((function(r,n){return r-t[n]}))},rotateZ90:function(){return[-this[1],this[0]]},rotateZ180:function(){return[-this[0],-this[1]]},rotateZ270:function(){return[this[1],-this[0]]},flip:function(){return this.map((function(t){return-t}))},lerp:function(t,r){var n=this,e=u(t),o=1-r,i=this.length<e.length?this.length:e.length;return Array.from(Array(i)).map((function(t,u){return n[u]*r+e[u]*o}))},midpoint:function(){for(var t=u(arguments),r=this.length<t.length?this.slice():t,n=this.length<t.length?t:this.slice(),e=r.length;e<n.length;e+=1)r[e]=0;return n.map((function(t,e){return.5*(r[e]+n[e])}))}}};Object.keys(l.preserve).forEach((function(t){h[t]=l.preserve[t]})),Object.keys(l.vector).forEach((function(t){h[t]=function(){return h.constructor.apply(h,r(l.vector[t].apply(this,arguments)))}}));var y={vector:{Super:Array.prototype,Args:Args,Getters:Getters,Methods:Methods,Static:function(t){t.fromAngle=function(r){return t(Math.cos(r),Math.sin(r))}}}},m=Object.assign({},y),b=function(t,r){var n=Object.create(m[t].proto.prototype);return m[t].Args.apply(n,r),Object.freeze(n)},d={vector:function(){return b("vector",arguments)},circle:function(){return b("circle",arguments)},rect:function(){return b("rect",arguments)}};return Object.keys(m).forEach((function(t){var r={};r.prototype=Object.create(m[t].Super||Object.prototype),r.prototype.constructor=r,Object.keys(m[t].Getters).forEach((function(n){return Object.defineProperty(r.prototype,n,{get:m[t].Getters[n],enumerable:!0})})),Object.keys(m[t].Methods).forEach((function(n){return Object.defineProperty(r.prototype,n,{value:m[t].Methods[n]})})),m[t].proto=r,m[t].Static(d[t]),d[t].prototype=m[t].proto.prototype,d[t].prototype.constructor=d[t],Object.freeze(m[t].proto.prototype),m[t].Methods.constructor=d[t]})),d}));
