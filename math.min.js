/* Math (c) Robby Kraft, MIT License */(function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self,e.math=n())})(this,function(){'use strict';var m=Math.PI,f=Math.abs,u=Math.sin,v=Math.cos,k=Math.atan2,P=Math.sqrt,x=Math.pow;function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){return r(e)||l(e,n)||p()}function t(e){return i(e)||o(e)||a()}function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function r(e){if(Array.isArray(e))return e}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e,n){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],i=!0,r=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(i=(l=a.next()).done)&&(t.push(l.value),!(n&&t.length===n));i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return t}}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return K(n)}function _(){var e=Array.from(arguments),n=e.filter(function(e){return!isNaN(e)}),i=e.filter(function(e){return e.constructor===Array});if(0===e.length)return{vector:[],origin:[]};if(!isNaN(e[0])&&4<=n.length)return{origin:[e[0],e[1]],vector:[e[2],e[3]]};if(0<i.length){if(1===i.length)return _.apply(void 0,t(i[0]));if(2===i.length)return{origin:[i[0][0],i[0][1]],vector:[i[1][0],i[1][1]]};if(4===i.length)return{origin:[i[0],i[1]],vector:[i[2],i[3]]}}if(e[0].constructor===Object){var r=[],o=[];return null==e[0].vector?null!=e[0].direction&&(r=J(e[0].direction)):r=J(e[0].vector),null==e[0].point?null!=e[0].origin&&(o=J(e[0].origin)):o=J(e[0].point),{origin:o,vector:r}}return{origin:[],vector:[]}}function c(){return _.apply(void 0,arguments)}function y(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];if(0!==i.length){if(1===i.length&&void 0!==i[0])return y.apply(void 0,t(i[0]));var o=Array.from(i),l=o.filter(function(e){return!isNaN(e)}),a=o.filter(function(n){return"object"===e(n)}).filter(function(e){return e.constructor===Array});return 4<=l.length?[[l[0],l[1]],[l[2],l[3]]]:2<=a.length&&!isNaN(a[0][0])?a:1!==a.length||isNaN(a[0][0][0])?void 0:a[0]}}function d(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return 0===n.length?void 0:1===n.length&&void 0!==n[0]?d.apply(void 0,t(n[0])):Array.from(n)}function h(e,n){var t=null==n?{}:n,i=function(e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:W;return this.compare_function(e,n)&&!0},r=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:W;return this.compare_function(e,t)&&n>=-t},o=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:W;return this.compare_function(e,t)&&n>=-t&&n<=1+t};return Object.defineProperty(t,"isParallel",{value:function(e){if(null==e.vector)throw new Error("isParallel() argument is missing a vector");var n=this.vector.length<e.vector.length,t=n?this.vector:e.vector,i=n?e.vector:this.vector;return oe(t,i)}}),Object.defineProperty(t,"isDegenerate",{value:function(){return re(this.vector)}}),Object.defineProperty(t,"nearestPoint",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=J(n);return tn(We(this.origin,this.vector,i,this.clip_function))}}),Object.defineProperty(t,"reflection",{value:function(){return pn.makeReflection(this.vector,this.origin)}}),Object.defineProperty(t,"intersect",{value:function(e){var n=this;return je(this.origin,this.vector,e.origin,e.vector,function(t,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:W;return n.compare_function(t,r)&&e.compare_function(i,r)})}}),Object.defineProperty(t,"intersectLine",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=_(n);return je(this.origin,this.vector,r.origin,r.vector,i.bind(this))}}),Object.defineProperty(t,"intersectRay",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=c(n);return je(this.origin,this.vector,i.origin,i.vector,r.bind(this))}}),Object.defineProperty(t,"intersectEdge",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=g(n),r=[i[1][0]-i[0][0],i[1][1]-i[0][1]];return je(this.origin,this.vector,i[0],r,o.bind(this))}}),Object.freeze(t)}function s(e){var n={},t=e,i=function(){return Je(this.points)},r=function(){return this.points.map(function(e,n,t){return[t[(n+t.length-1)%t.length],t[n],t[(n+1)%t.length]]}).map(function(e){return dn(e[1],e[2],e[0])})};return Object.defineProperty(n,"area",{value:i}),Object.defineProperty(n,"centroid",{value:function(){return Ke(this.points)}}),Object.defineProperty(n,"midpoint",{value:function(){return j(this.points)}}),Object.defineProperty(n,"enclosingRectangle",{value:function(){return Me(this.points)}}),Object.defineProperty(n,"contains",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return ae(J(n),this.points)}}),Object.defineProperty(n,"nearest",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r,o=J(n),l=this.sides.map(function(e){return e.nearestPoint(o)}),a=1/0;return l.map(function(e){return I(o,e)}).forEach(function(e,n){e<a&&(a=e,r=n)}),{point:l[r],edge:this.sides[r]}}}),Object.defineProperty(n,"clipSegment",{value:function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=g(t),o=He(this.points,r[0],r[1]);return void 0===o?void 0:yn(o)}}),Object.defineProperty(n,"clipLine",{value:function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=_(t),o=Oe(this.points,r.origin,r.vector);return void 0===o?void 0:yn(o)}}),Object.defineProperty(n,"clipRay",{value:function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=_(t),o=Te(this.points,r.origin,r.vector);return void 0===o?void 0:yn(o)}}),Object.defineProperty(n,"split",{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=_(n);return Xe(this.points,r.origin,r.vector).map(function(e){return t(e)})}}),Object.defineProperty(n,"scale",{value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ke(this.points),i=this.points.map(function(e){return[0,1].map(function(t,r){return e[r]-n[r]})}).map(function(t){return t.map(function(r,o){return n[o]+t[o]*e})});return t(i)}}),Object.defineProperty(n,"rotate",{value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ke(this.points),i=this.points.map(function(t){var i=[t[0]-n[0],t[1]-n[1]],r=P(x(i[0],2)+x(i[1],2)),o=k(i[1],i[0]);return[n[0]+v(o+e)*r,n[1]+u(o+e)*r]});return t(i)}}),Object.defineProperty(n,"translate",{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=J(n),o=this.points.map(function(e){return e.map(function(e,n){return e+r[n]})});return t(o)}}),Object.defineProperty(n,"transform",{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=Q(n),o=this.points.map(function(e){return tn(A(r,e))});return t(o)}}),Object.defineProperty(n,"edges",{get:function(){return this.sides}}),Object.defineProperty(n,"sectors",{get:function(){return r()}}),Object.defineProperty(n,"signedArea",{value:i}),Object.freeze(n)}var b=function(e){var n=e.map(function(e){return e*e}).reduce(function(e,n){return e+n},0);return P(n)},w=function(e){var n=b(e);return 0===n?e:e.map(function(e){return e/n})},z=function(e,n){return e.map(function(t,r){return e[r]*n[r]}).reduce(function(e,n){return e+n},0)},j=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=0<t.length?t[0].length:0,o=Array(r).fill(0);return t.forEach(function(e){return o.forEach(function(n,t){o[t]+=e[t]||0})}),o.map(function(e){return e/t.length})},E=function(e,n){return[e[1]*n[2]-e[2]*n[1],e[0]*n[2]-e[2]*n[0],e[0]*n[1]-e[1]*n[0]]},I=function(e,n){var t=e[0]-n[0],i=e[1]-n[1];return P(t*t+i*i)},R=function(e,n){for(var t=e.length,r=0,o=0;o<t;o+=1)r+=x(e[o]-n[o],2);return P(r)},S=function(e,n){return e.map(function(t,r){return(e[r]+n[r])/2})},q=/*#__PURE__*/Object.freeze({__proto__:null,magnitude:b,normalize:w,dot:z,average:j,cross2:function(e,n){return[e[0]*n[1],e[1]*n[0]]},cross3:E,distance2:I,distance3:function(n,t){var i=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return P(i*i+r*r+o*o)},distance:R,midpoint2:S}),A=function(e,n){return[e[0]*n[0]+e[2]*n[1]+e[4],e[1]*n[0]+e[3]*n[1]+e[5]]},L=function(e,n,t){return{origin:[e[0]*n[0]+e[2]*n[1]+e[4],e[1]*n[0]+e[3]*n[1]+e[5]],vector:[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1]]}},V=function(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]},Z=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[0,0];return[e,0,0,e,e*-n[0]+n[0],e*-n[1]+n[1]]},O=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[0,0],t=v(e),i=u(e);return[t,i,-i,t,n[0],n[1]]},T=function(e,n){var t=n&&n[0]?n[0]:0,i=n&&n[1]?n[1]:0,r=k(e[1],e[0]),o=v(r),l=u(r),p=v(-r),g=u(-r),_=o*p+l*g,a=o*-g+l*p,y=l*p+-o*g,c=l*-g+-o*p;return[_,a,y,c,t+_*-t+-i*y,i+a*-t+-i*c]},H=function(e){var n=e[0]*e[3]-e[1]*e[2];return n&&!isNaN(n)&&isFinite(e[4])&&isFinite(e[5])?[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[3]*e[4])/n,(e[1]*e[4]-e[0]*e[5])/n]:void 0},B=/*#__PURE__*/Object.freeze({__proto__:null,multiply_matrix2_vector2:A,multiply_matrix2_line2:L,multiply_matrices2:V,make_matrix2_translation:function(e,n){return[1,0,0,1,e,n]},make_matrix2_scale:Z,make_matrix2_rotation:O,make_matrix2_reflection:T,make_matrix2_inverse:H}),D=function(e){var n="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return n?Math.max(0,(n[1]?n[1].length:0)-(n[2]?+n[2]:0)):0},F=function(e){var n=Math.min,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15,i=parseFloat(e.toFixed(t));return D(i)===n(t,D(e))?e:i},N=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},C=function e(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];switch(i.length){case void 0:case 0:return i;case 1:return N(i[0])&&"string"!=typeof i[0]?e.apply(void 0,t(i[0])):[i[0]];default:return Array.from(i).map(function(n){return N(n)?t(e(n)):n}).reduce(function(e,n){return e.concat(n)},[]);}},G=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r=t;1===r.length&&r[0].length;){var o=r,l=n(o,1);r=l[0]}return r},J=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=C(n).filter(function(e){return void 0!==e});if(void 0!==i)return 0===i.length?void 0:(isNaN(i[0].x)||(i=["x","y","z"].map(function(e){return i[0][e]}).filter(function(e){return void 0!==e})),i.filter(function(e){return"number"==typeof e}))},K=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return G(n).map(function(e){return J(e)})},M=[1,0,0,1,0,0],Q=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=J(n);return void 0===r?void 0:6===r.length?r:6<r.length?[r[0],r[1],r[2],r[3],r[4],r[5]]:6>r.length?M.map(function(e,n){return r[n]||e}):void 0},U=function(){console.warn("get_matrix3 not implemented")},W=1e-6,X=function(e,n){return Array.from(Array(e.length-1)).map(function(t,r){return n(e[0],e[r+1])}).reduce(function(e,n){return e&&n},!0)},Y=function e(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=K(i);if(0===o.length)return!1;if(1===o.length&&void 0!==o[0])return e.apply(void 0,t(o[0]));var l=o[0].length,a=Array.from(Array(l));return Array.from(Array(o.length-1)).map(function(e,n){return a.map(function(e,t){return f(o[n][t]-o[n+1][t])<W}).reduce(function(e,n){return e&&n},!0)}).reduce(function(e,n){return e&&n},!0)&&Array.from(Array(o.length-1)).map(function(e,n){return o[0].length===o[n+1].length}).reduce(function(e,n){return e&&n},!0)},$=function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=G(t);if(1>r.length)return!1;var o=e(r[0]);if("undefined"===o)return!1;switch(r[0].constructor===Array&&(r=r.map(function(e){return G(e)})),o){case"number":return X(r,function(e,n){return f(e-n)<W});case"boolean":return X(r,function(e,n){return e===n});case"object":return r[0].constructor===Array?Y(r):(console.warn("comparing array of objects for equivalency by slow stringify and no-epsilon"),X(r,function(e,n){return JSON.stringify(e)===JSON.stringify(n)}));default:console.warn("incapable of determining comparison method");}return!1},ee=/*#__PURE__*/Object.freeze({__proto__:null,EPSILON:W,equivalent_numbers:function e(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return 0!==i.length&&(1===i.length&&void 0!==i[0]?e.apply(void 0,t(i[0])):X(i,function(e,n){return f(e-n)<W}))},equivalent_vectors:Y,equivalent:$}),ne=function(e,n,t,i,r){var o=function(e,n){return e[0]*n[1]-n[0]*e[1]},l=o(n,i),a=o([t[0]-e[0],t[1]-e[1]],i),p=o([e[0]-t[0],e[1]-t[1]],n);if(f(l)<W)return!1;return r(a/l,p/-l)},te=function(e,n){return e>=-W&&e<=1+W&&n>=-W&&n<=1+W},ie=function(e,n,t,i){var r=[n[0]-e[0],n[1]-e[1]],o=[i[0]-t[0],i[1]-t[1]];return ne(e,r,t,o,te)},re=function(e){return f(e.reduce(function(e,n){return e+n},0))<W},oe=function(e,n){return 1-f(z(w(e),w(n)))<W},le=function(e,n,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:W,r=[t[0]-e[0],t[1]-e[1]],o=r[0]*n[1]-r[1]*n[0];return f(o)<i},ae=function(e,n){for(var t=!1,r=0,o=n.length-1;r<n.length;o=r++)n[r][1]>e[1]!=n[o][1]>e[1]&&e[0]<(n[o][0]-n[r][0])*(e[1]-n[r][1])/(n[o][1]-n[r][1])+n[r][0]&&(t=!t);return t},pe=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:W;return!!(null!=n&&0<n.length)&&n.map(function(n,r,i){var o=i[(r+1)%i.length],l=[o[0]-n[0],o[1]-n[1]],a=[e[0]-n[0],e[1]-n[1]];return l[0]*a[1]-l[1]*a[0]>-t}).map(function(e,n,t){return e===t[0]}).reduce(function(e,n){return e&&n},!0)},ge=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:W;return!!(null!=n&&0<n.length)&&n.map(function(n,r,i){var o=i[(r+1)%i.length],l=[o[0]-n[0],o[1]-n[1]],a=[e[0]-n[0],e[1]-n[1]];return l[0]*a[1]-l[1]*a[0]>t}).map(function(e,n,t){return e===t[0]}).reduce(function(e,n){return e&&n},!0)},_e=function(e,n){for(var t=e.map(function(e,n,t){return[e,t[(n+1)%t.length]]}),r=n.map(function(e,n,t){return[e,t[(n+1)%t.length]]}),o=0;o<t.length;o+=1)for(var l=0;l<r.length;l+=1)if(ie(t[o][0],t[o][1],r[l][0],r[l][1]))return!0;return!!ae(n[0],e)||!!ae(e[0],n)},ce=/*#__PURE__*/Object.freeze({__proto__:null,overlap_function:ne,segment_segment_overlap:ie,degenerate:re,parallel:oe,point_on_line:le,point_on_segment:function(e,n,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:W,r=[e[0]-n[0],e[1]-n[1]],o=[e[0]-t[0],e[1]-t[1]],l=[n[0]-t[0],n[1]-t[1]],a=P(r[0]*r[0]+r[1]*r[1]),p=P(o[0]*o[0]+o[1]*o[1]),g=P(l[0]*l[0]+l[1]*l[1]);return f(a-p-g)<i},point_in_poly:ae,point_in_convex_poly:pe,point_in_convex_poly_exclusive:ge,convex_polygons_overlap:_e,convex_polygon_is_enclosed:function(e,n){var t=n.map(function(n){return pe(n,e)}).reduce(function(e,n){return e||n},!1);return!t&&void 0},convex_polygons_enclose:function(e,n){var t=n.map(function(n){return pe(n,e)}).reduce(function(e,n){return e||n},!1),i=e.map(function(n){return pe(n,e)}).reduce(function(e,n){return e&&n},!0);return!t&&i},is_counter_clockwise_between:function(e,n,t){for(;t<n;)t+=2*m;for(;e<n;)e+=2*m;return e<t}}),ye=function(){return!0},de=function(e,n){return n>=-W},he=function(e,n){return n>=-W&&n<=1+W},se=function(e,n){return e>=-W&&n>=-W},me=function(e,n){return e>=-W&&n>=-W&&n<=1+W},fe=function(e,n){return e>=-W&&e<=1+W&&n>=-W&&n<=1+W},ue=function(e,n){return n>W},ve=function(e,n){return n>W&&n<1-W},ke=function(e,n){return e>W&&n>W},Pe=function(e,n){return e>W&&n>W&&n<1-W},xe=function(e,n){return e>W&&e<1-W&&n>W&&n<1-W},be=function(e){return e},we=function(e){return e<-W?0:e},ze=function(e){return e<-W?0:e>1+W?1:e},je=function(e,n,t,i,r){function o(e,n){return e[0]*n[1]-n[0]*e[1]}var l=5<arguments.length&&arguments[5]!==void 0?arguments[5]:W,a=o(n,i);if(!(f(a)<l)){var p=o([t[0]-e[0],t[1]-e[1]],i),g=o([e[0]-t[0],e[1]-t[1]],n),_=p/a;return r(_,g/-a,l)?[e[0]+n[0]*_,e[1]+n[1]*_]:void 0}},Ee=function(e,n,t,i,r){var o=[i[0]-t[0],i[1]-t[1]];return je(e,n,t,o,he,r)},Ie=function(e,n,t,i,r){var o=[i[0]-t[0],i[1]-t[1]];return je(e,n,t,o,me,r)},Re=function(e,n,t,i,r){var o=[i[0]-t[0],i[1]-t[1]];return je(e,n,t,o,ve,r)},Se=function(e,n,t,i,r){var o=[i[0]-t[0],i[1]-t[1]];return je(e,n,t,o,Pe,r)},qe=function(e,n,t,i,r){var o=[n[0]-e[0],n[1]-e[1]],l=[i[0]-t[0],i[1]-t[1]];return je(e,o,t,l,xe,r)},Ae=function(e,n,t,i){function r(e){return e<-o?-1:1}var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:W,l=t[0]-e[0],a=t[1]-e[1],p=i[0]-e[0],g=i[1]-e[1],_=p-l,c=g-a,y=l*g-p*a,d=y*y,h=n*n,s=f(_*_+c*c),m=h*s-d;if(!(m<-o)){var u=P(h*s-d),v=[e[0]+(y*c+r(c)*_*u)/s,e[1]+(-y*_+f(c)*u)/s];if(m>o){var k=[e[0]+(y*c-r(c)*_*u)/s,e[1]+(-y*_-f(c)*u)/s];return[v,k]}return[v]}},Le=function(){throw"circle_ray has not been written yet"},Ve=function(e,n,t,i){function r(e){return 0>e?-1:1}var o=x(n,2),l=t[0]-e[0],a=t[1]-e[1],p=i[0]-e[0],g=i[1]-e[1],_=p-l,c=g-a,y=_*_+c*c,d=l*g-p*a,h=(d*c+r(c)*_*P(o*y-d*d))/y,s=(d*c-r(c)*_*P(o*y-d*d))/y,m=(-d*_+f(c)*P(o*y-d*d))/y,u=(-d*_-f(c)*P(o*y-d*d))/y,v=isNaN(h),k=isNaN(s);return v||k?v&&k?void 0:v?k?void 0:[[s+e[0],u+e[1]]]:[[h+e[0],m+e[1]]]:[[h+e[0],m+e[1]],[s+e[0],u+e[1]]]},Ze=function(e,n){return f(e[0]-n[0])<W&&f(e[1]-n[1])<W},Oe=function(e,n,t){var r=e.map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return Ee(n,t,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[r[0],r[0]];case 2:return r;default:for(var o=1;o<r.length;o+=1)if(!Ze(r[0],r[o]))return[r[0],r[o]];}},Te=function(e,n,t){var r=e.map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return Ie(n,t,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[n,r[0]];case 2:return r;default:for(var o=1;o<r.length;o+=1)if(!Ze(r[0],r[o]))return[r[0],r[o]];}},He=function(e,n,i){var r=e.map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return qe(n,i,e[0],e[1])}).filter(function(e){return null!=e}),o=ge(n,e),l=ge(i,e),a=pe(n,e),p=pe(i,e);if(0===r.length&&(o||l))return[n,i];if(0===r.length&&a&&p)return[n,i];switch(r.length){case 0:return o?[t(n),t(i)]:void 0;case 1:return a?[t(n),r[0]]:[t(i),r[0]];case 2:return r;default:throw new Error("clipping segment in a convex polygon resulting in 3 or more points");}},Be=/*#__PURE__*/Object.freeze({__proto__:null,limit_line:be,limit_ray:we,limit_segment:ze,intersection_function:je,line_line:function(e,n,t,i,r){return je(e,n,t,i,ye,r)},line_ray:function(e,n,t,i,r){return je(e,n,t,i,de,r)},line_segment:Ee,ray_ray:function(e,n,t,i,r){return je(e,n,t,i,se,r)},ray_segment:Ie,segment_segment:function(e,n,t,i,r){var o=[n[0]-e[0],n[1]-e[1]],l=[i[0]-t[0],i[1]-t[1]];return je(e,o,t,l,fe,r)},line_ray_exclusive:function(e,n,t,i,r){return je(e,n,t,i,ue,r)},line_segment_exclusive:Re,ray_ray_exclusive:function(e,n,t,i,r){return je(e,n,t,i,ke,r)},ray_segment_exclusive:Se,segment_segment_exclusive:qe,circle_line:Ae,circle_ray:Le,circle_segment:Ve,convex_poly_line:Oe,convex_poly_ray:Te,convex_poly_segment:He,convex_poly_ray_exclusive:function(e,n,t){var r=e.map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return Se(n,t,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[n,r[0]];case 2:return r;default:for(var o=1;o<r.length;o+=1)if(!Ze(r[0],r[o]))return[r[0],r[o]];}}}),De=function(e,n){var t=e[0]*n[0]+e[1]*n[1],i=e[0]*n[1]-e[1]*n[0],r=k(i,t);return 0>r&&(r+=2*m),r},Fe=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=n.map(function(e){return k(e[1],e[0])}),r=Array.from(Array(i.length)).map(function(e,n){return n}).sort(function(e,n){return i[e]-i[n]});return r.slice(r.indexOf(0),r.length).concat(r.slice(0,r.indexOf(0)))},Ne=function(e,n){var t=w(e),r=w(n),i=t.map(function(e,n){return t[n]+r[n]}),o=w(i),l=t.map(function(e,n){return-t[n]+-r[n]});return[o,w(l)]},Ce=function(e,n,t){var r=De(n,t)/e;return Array.from(Array(e-1)).map(function(e,t){return n+r*t})},Ge=function(e,n,t){var i=k(n[1],n[0]),r=k(t[1],t[0]);return Ce(e,i,r).map(function(e){return[v(e),u(e)]})},Je=function(e){return .5*e.map(function(e,n,t){var i=t[(n+1)%t.length];return e[0]*i[1]-i[0]*e[1]}).reduce(function(e,n){return e+n},0)},Ke=function(e){var n=1/(6*Je(e));return e.map(function(e,n,t){var i=t[(n+1)%t.length],r=e[0]*i[1]-i[0]*e[1];return[(e[0]+i[0])*r,(e[1]+i[1])*r]}).reduce(function(e,n){return[e[0]+n[0],e[1]+n[1]]},[0,0]).map(function(e){return e*n})},Me=function(e){var n=e[0].length,t=Array.from(Array(n)).map(function(){return 1/0}),r=Array.from(Array(n)).map(function(){return-Infinity});e.forEach(function(e){return e.forEach(function(e,n){e<t[n]&&(t[n]=e),e>r[n]&&(r[n]=e)})});var o=r.map(function(e,n){return e-t[n]});return[t,o]},Qe=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,o=.5*(2*m/e),l=i/v(o);return Array.from(Array(Math.floor(e))).map(function(r,p){var i=-2*m*p/e+o,a=F(n+l*u(i),14),g=F(t+l*v(i),14);return[a,g]})},Ue=function(e,n,t){for(var r,o=n.map(function(n,r){return{o:n,i:r,d:t(e,n)}}),l=1/0,a=0;a<o.length;a+=1)o[a].d<l&&(r=a,l=o[a].d);return r},We=function(e,n,t,i){var r=4<arguments.length&&arguments[4]!==void 0?arguments[4]:W,o=x(n[0],2)+x(n[1],2),l=[0,1].map(function(n,r){return t[r]-e[r]}),a=[0,1].map(function(e,t){return n[t]*l[t]}).reduce(function(e,n){return e+n},0),p=i(a/o,r);return[0,1].map(function(t,r){return e[r]+n[r]*p})},Xe=function(e,n,t){var i=e.map(function(e,r){var i=le(n,t,e);return{type:"v",point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),r=e.map(function(e,r,i){var o=Re(n,t,e,i[(r+1)%i.length]);return{type:"e",point:o,at_index:r}}).filter(function(e){return null!=e.point}),o=i.concat(r).sort(function(e,n){return f(e.point[0]-n.point[0])<W?e.point[1]-n.point[1]:e.point[0]-n.point[0]});return console.log(o),e},Ye=function(e,n,t){var i=e.map(function(e,r){var i=le(n,t,e);return{point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),r=e.map(function(e,r,i){var o=Re(n,t,e,i[(r+1)%i.length]);return{point:o,at_index:r}}).filter(function(e){return null!=e.point});if(2==r.length){var o=r.slice().sort(function(e,n){return e.at_index-n.at_index}),l=e.slice(o[1].at_index+1).concat(e.slice(0,o[0].at_index+1));l.push(o[0].point),l.push(o[1].point);var a=e.slice(o[0].at_index+1,o[1].at_index+1);return a.push(o[1].point),a.push(o[0].point),[l,a]}if(1==r.length&&1==i.length){i[0].type="v",r[0].type="e";var p=i.concat(r).sort(function(e,n){return e.at_index-n.at_index}),g=e.slice(p[1].at_index+1).concat(e.slice(0,p[0].at_index+1));"e"===p[0].type&&g.push(p[0].point),g.push(p[1].point);var _=e.slice(p[0].at_index+1,p[1].at_index+1);return"e"===p[1].type&&_.push(p[1].point),_.push(p[0].point),[g,_]}if(2==i.length){var c=i.slice().sort(function(e,n){return e.at_index-n.at_index}),y=e.slice(c[1].at_index).concat(e.slice(0,c[0].at_index+1)),d=e.slice(c[0].at_index,c[1].at_index+1);return[y,d]}return[e.slice()]},$e=function(n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:W,i=n.slice().sort(function(e,n){return f(e[1]-n[1])<t?e[0]-n[0]:e[1]-n[1]}),r=[];r.push(i[0]);var o=0,l=0,a=function(){l+=1;var e=r.length-1,n=i.filter(function(n){return!(f(n[0]-r[e][0])<t&&f(n[1]-r[e][1])<t)}).map(function(n){for(var t=k(r[e][1]-n[1],r[e][0]-n[0]);t<o;)t+=2*m;return{node:n,angle:t,distance:void 0}}).sort(function(e,n){return e.angle<n.angle?-1:e.angle>n.angle?1:0});if(0===n.length)return{v:void 0};var a=n[0];return n=n.filter(function(e){return f(a.angle-e.angle)<t}).map(function(n){var t=P(x(r[e][0]-n.node[0],2)+x(r[e][1]-n.node[1],2));return n.distance=t,n}).sort(function(e,n){return e.distance<n.distance?1:e.distance>n.distance?-1:0}),0<r.filter(function(e){return e===n[0].node}).length?{v:r}:void(r.push(n[0].node),o=k(r[e][1]-n[0].node[1],r[e][0]-n[0].node[0]))};do{var p=a();if("object"===e(p))return p.v}while(l<1e4)},en=/*#__PURE__*/Object.freeze({__proto__:null,clockwise_angle2_radians:function(e,n){for(;0>e;)e+=2*m;for(;0>n;)n+=2*m;var t=e-n;return 0<=t?t:2*m-(n-e)},counter_clockwise_angle2_radians:function(e,n){for(;0>e;)e+=2*m;for(;0>n;)n+=2*m;var t=n-e;return 0<=t?t:2*m-(e-n)},clockwise_angle2:function(e,n){var t=n[0]*e[0]+n[1]*e[1],i=n[0]*e[1]-n[1]*e[0],r=k(i,t);return 0>r&&(r+=2*m),r},counter_clockwise_angle2:De,counter_clockwise_vector_order:Fe,interior_angles2:function(e,n){var t=De(e,n);return[t,2*m-t]},interior_angles:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(e,n,t){return De(e,t[(n+1)%t.length])})},bisect_vectors:Ne,bisect_lines2:function(e,n,i,r){var o=n[0]*r[1]-r[0]*n[1];if(f(o)<W){var l=[S(e,i),[n[0],n[1]]],a=[l,l],p=n[0]*r[0]+n[1]*r[1];return delete(0<p?a[1]:a[0]),a}var g=(i[0]-e[0])*r[1]-r[0]*(i[1]-e[1]),_=g/o,t=e[0]+n[0]*_,c=e[1]+n[1]*_,y=Ne(n,r);return y[1]=[y[1][1],-y[1][0]],y.map(function(e){return[[t,c],e]})},subsect_radians:Ce,subsect:Ge,signed_area:Je,centroid:Ke,enclosing_rectangle:Me,make_regular_polygon:Qe,nearest_point2:function(e,n){var t=Ue(e,n,I);return t===void 0?void 0:n[t]},nearest_point:function(e,n){var t=Ue(e,n,R);return t===void 0?void 0:n[t]},nearest_point_on_line:We,split_polygon:Xe,split_convex_polygon:Ye,convex_hull:$e}),nn=function(e){var n,i=[],r=e,o=function(){return r(w(n))},l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=J(t);return this.length>r.length?z(r,n):z(n,r)},a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=J(t),l=n.slice();return null==l[2]&&(l[2]=0),null==o[2]&&(o[2]=0),r(E(l,o))},p=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=J(t),o=n.length<r.length?n.length:r.length,l=Array.from(Array(o)).map(function(e,t){return x(n[t]-r[t],2)}).reduce(function(e,n){return e+n},0);return P(l)},g=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=Q(t);return r(A(o,n))},c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=J(t);return r(n.map(function(e,n){return e+o[n]}))},y=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=J(t);return r(n.map(function(e,n){return e-o[n]}))},d=function(e,t){var i=O(e,t);return r(A(i,n))},h=function(){return r(-n[1],n[0])},s=function(){return r(-n[0],-n[1])},m=function(){return r(n[1],-n[0])},f=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=_(t),l=T(o.vector,o.origin);return r(A(l,n))},u=function(e,t){var o=J(e),l=n.length<o.length?n.length:o.length,a=Array.from(Array(l)).map(function(e,r){return n[r]*t+o[r]*(1-t)});return r(a)},v=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=J(t),o=n.length<r.length?n:r,l=n.length<r.length?r:n;return $(o,l)},k=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=J(t),o=n.length<r.length?n:r,l=n.length<r.length?r:n;return oe(o,l)},j=function(e){return r(n.map(function(n){return n*e}))},I=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];for(var l=J(t),a=n.length<l.length?n.slice():l,p=n.length<l.length?l:n.slice(),g=a.length;g<p.length;g+=1)a[g]=0;return r(p.map(function(e,n){return .5*(a[n]+p[n])}))},R=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=J(t);return Ne(n,o).map(function(e){return r(e)})};return Object.defineProperty(i,"normalize",{value:o}),Object.defineProperty(i,"dot",{value:l}),Object.defineProperty(i,"cross",{value:a}),Object.defineProperty(i,"distanceTo",{value:p}),Object.defineProperty(i,"transform",{value:g}),Object.defineProperty(i,"add",{value:c}),Object.defineProperty(i,"subtract",{value:y}),Object.defineProperty(i,"rotateZ",{value:d}),Object.defineProperty(i,"rotateZ90",{value:h}),Object.defineProperty(i,"rotateZ180",{value:s}),Object.defineProperty(i,"rotateZ270",{value:m}),Object.defineProperty(i,"reflect",{value:f}),Object.defineProperty(i,"lerp",{value:u}),Object.defineProperty(i,"isEquivalent",{value:v}),Object.defineProperty(i,"isParallel",{value:k}),Object.defineProperty(i,"scale",{value:j}),Object.defineProperty(i,"midpoint",{value:I}),Object.defineProperty(i,"bisect",{value:R}),Object.defineProperty(i,"copy",{value:function(){return r.apply(void 0,t(n))}}),Object.defineProperty(i,"magnitude",{get:function(){return b(n)}}),Object.defineProperty(i,"bind",{value:function(e){n=e}}),i},tn=function e(){var n=nn(e),t=Object.create(n);n.bind(t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return J(r).forEach(function(e){return t.push(e)}),Object.defineProperty(t,"x",{get:function(){return t[0]}}),Object.defineProperty(t,"y",{get:function(){return t[1]}}),Object.defineProperty(t,"z",{get:function(){return t[2]}}),t};tn.withAngle=function(e){return tn(v(e),u(e))};var rn=function(e,n){return[e[0]*n[0]+e[3]*n[1]+e[6]*n[2]+e[9],e[1]*n[0]+e[4]*n[1]+e[7]*n[2]+e[10],e[2]*n[0]+e[5]*n[1]+e[8]*n[2]+e[11]]},on=function(e,n){return[e[0]*n[0]+e[3]*n[1]+e[6]*n[2],e[1]*n[0]+e[4]*n[1]+e[7]*n[2],e[2]*n[0]+e[5]*n[1]+e[8]*n[2],e[0]*n[3]+e[3]*n[4]+e[6]*n[5],e[1]*n[3]+e[4]*n[4]+e[7]*n[5],e[2]*n[3]+e[5]*n[4]+e[8]*n[5],e[0]*n[6]+e[3]*n[7]+e[6]*n[8],e[1]*n[6]+e[4]*n[7]+e[7]*n[8],e[2]*n[6]+e[5]*n[7]+e[8]*n[8],e[0]*n[9]+e[3]*n[10]+e[6]*n[11]+e[9],e[1]*n[9]+e[4]*n[10]+e[7]*n[11]+e[10],e[2]*n[9]+e[5]*n[10]+e[8]*n[11]+e[11]]},ln=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[0,0,0];return[e,0,0,0,e,0,0,0,e,e*-n[0]+n[0],e*-n[1]+n[1],e*-n[2]+n[2]]},an=function(){},pn=function e(){for(var t=[1,0,0,1,0,0],i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var l=Q(r);void 0!==l&&l.forEach(function(e,n){t[n]=e});return Object.defineProperty(t,"inverse",{value:function(){return e(H(t).map(function(e){return F(e,13)}))}}),Object.defineProperty(t,"multiply",{value:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=Q(i);return e(V(t,o).map(function(e){return F(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=J(n);return tn(A(t,r).map(function(e){return F(e,13)}))}}),Object.freeze(t)};pn.makeIdentity=function(){return pn(1,0,0,1,0,0)},pn.makeTranslation=function(e,n){return pn(1,0,0,1,e,n)},pn.makeScale=function(){return pn.apply(void 0,t(Z.apply(void 0,arguments)))},pn.makeRotation=function(e,n){return pn(O(e,n).map(function(e){return F(e,13)}))},pn.makeReflection=function(e,n){return pn(T(e,n).map(function(e){return F(e,13)}))};var gn=function e(){for(var t=[1,0,0,0,1,0,0,0,1,0,0,0],i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var l=U();void 0!==l&&l.forEach(function(e,n){t[n]=e});return Object.defineProperty(t,"inverse",{value:function(){return e(an().map(function(e){return F(e,13)}))}}),Object.defineProperty(t,"multiply",{value:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=U();return e(on(t,o).map(function(e){return F(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=J(n);return tn(rn(r,t).map(function(e){return F(e,13)}))}}),Object.freeze(t)};gn.makeIdentity=function(){return gn(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},gn.makeTranslation=function(e,n,t){return gn(1,0,0,0,0,1,0,0,0,0,1,0,e,n,t,1)},gn.makeScale=function(){return gn.apply(void 0,t(ln.apply(void 0,arguments)))};var _n=function e(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=_(t),o=r.origin,l=r.vector,a=h.bind(this),p=Object.create(a(e));return Object.defineProperty(p,"compare_function",{value:function(){return!0}}),Object.defineProperty(p,"clip_function",{value:be}),Object.defineProperty(p,"origin",{get:function(){return tn(o)}}),Object.defineProperty(p,"vector",{get:function(){return tn(l)}}),Object.defineProperty(p,"length",{get:function(){return 1/0}}),Object.defineProperty(p,"transform",{value:function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=Q(t),a=L(r,o,l);return e(a[0],a[1])}}),p};_n.fromPoints=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=y(n);return _n({origin:i[0],vector:w([i[1][0]-i[0][0],i[1][1]-i[0][1]])})},_n.perpendicularBisector=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=y(n),r=w([i[1][0]-i[0][0],i[1][1]-i[0][1]]);return _n({origin:j(i[0],i[1]),vector:[r[1],-r[0]]})};var cn=function e(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=_(t),o=r.origin,l=r.vector,a=h.bind(this),p=Object.create(a(e));return Object.defineProperty(p,"origin",{get:function(){return tn(o)}}),Object.defineProperty(p,"vector",{get:function(){return tn(l)}}),Object.defineProperty(p,"length",{get:function(){return 1/0}}),Object.defineProperty(p,"transform",{value:function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=Q(t),a=l.map(function(e,n){return e+o[n]}),p=A(r,o),g=A(r,a).map(function(e,n){return e-p[n]});return e(p,g)}}),Object.defineProperty(p,"rotate180",{value:function(){return e(o[0],o[1],-l[0],-l[1])}}),Object.defineProperty(p,"compare_function",{value:function(e,n){return e>=-n}}),Object.defineProperty(p,"clip_function",{value:we}),p};cn.fromPoints=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=y(n);return cn({origin:i[0],vector:w([i[1][0]-i[0][0],i[1][1]-i[0][1]])})};var yn=function e(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=y(t),o=h.bind(this),l=Object.create(o(e,[])),a=0<r.length?r.map(function(e){return tn(e)}):void 0;if(void 0!==a){a.forEach(function(e,n){l[n]=e});var p=function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=Q(t),o=l.map(function(e){return A(r,e)});return e(o)},g=function(){return tn(l[1][0]-l[0][0],l[1][1]-l[0][1])},_=function(){return tn(j(l[0],l[1]))},c=function(){return P(x(l[1][0]-l[0][0],2)+x(l[1][1]-l[0][1],2))},d=function(e,n){return e>=-n&&e<=1+n};return Object.defineProperty(l,"origin",{get:function(){return l[0]}}),Object.defineProperty(l,"vector",{get:function(){return g()}}),Object.defineProperty(l,"midpoint",{value:_}),Object.defineProperty(l,"length",{get:function(){return c()}}),Object.defineProperty(l,"transform",{value:p}),Object.defineProperty(l,"compare_function",{value:d}),Object.defineProperty(l,"clip_function",{value:ze}),l}},dn=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[0,0],i=[J(e),J(n)];return{contains:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=J(n).map(function(e,n){return e+t[n]}),l=(o[1]-i[0][1])*-i[0][0]-(o[0]-i[0][0])*-i[0][1],a=o[1]*i[1][0]-o[0]*i[1][1];return 0>l&&0>a},bisect:function(){var e=De(i[0],i[1]),n=i.map(function(e){return k(e[1],e[0])}),t=n[0]+.5*e;return[v(t),u(t)]},subsect:function(e){return Ge(e,i[0],i[1]).map(function(e){return[e[0],e[1]]})},get center(){return t},get vectors(){return i},get angle(){return De(i[0],i[1])}}};dn.fromVectors=function(e,n){return dn(e,n)},dn.fromPoints=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[0,0],i=[e,n].map(function(e){return e.map(function(n,r){return e[r]-t[r]})});return dn(i[0],i[1],t)};var hn=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=K(n).map(function(e){return tn(e)});if(void 0!==i){var r=i.map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return yn(e[0][0],e[0][1],e[1][0],e[1][1])}),o=s.bind(this),l=Object.create(o());return Object.defineProperty(l,"points",{get:function(){return i}}),Object.defineProperty(l,"sides",{get:function(){return r}}),l}};hn.regularPolygon=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,r=Qe(e,n,t,i);return hn(r)},hn.convexHull=function(e){var n=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],t=$e(e,n);return hn(t)};var sn=function e(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var r=d(t).map(function(e){return tn(e)});if(void 0!==r){var o=r.map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return yn(e[0][0],e[0][1],e[1][0],e[1][1])}),l=s.bind(this),a=Object.create(l(e)),p=function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];var o=_(t);return Ye(r,o.origin,o.vector).map(function(n){return e(n)})},g=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=d(n);return _e(r,i)},c=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ke(a.points),i=a.points.map(function(e){return[0,1].map(function(n,r){return e[r]-t[r]})}).map(function(e){return e.map(function(r,o){return t[o]+e[o]*n})});return e(i)},y=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ke(a.points),i=a.points.map(function(e){var i=[e[0]-t[0],e[1]-t[1]],r=P(x(i[0],2)+x(i[1],2)),o=k(i[1],i[0]);return[t[0]+v(o+n)*r,t[1]+u(o+n)*r]});return e(i)};return Object.defineProperty(a,"points",{get:function(){return r}}),Object.defineProperty(a,"sides",{get:function(){return o}}),Object.defineProperty(a,"split",{value:p}),Object.defineProperty(a,"overlaps",{value:g}),Object.defineProperty(a,"scale",{value:c}),Object.defineProperty(a,"rotate",{value:y}),a}};sn.regularPolygon=function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,r=Qe(e,n,t,i);return sn(r)},sn.convexHull=function(e){var n=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],t=$e(e,n);return sn(t)};var mn=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=K(n);if(void 0!==r){var o=Fe.apply(void 0,t(r)),l=function(){return o.map(function(e){return r[e]}).map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return dn.fromVectors(e[0],e[1])})},a=function(){return o.map(function(e){return r[e]}).map(function(e,n,t){return[e,t[(n+1)%t.length]]}).map(function(e){return De(e[0],e[1])})};return{sectors:l,angles:a,get vectors(){return r},get vectorOrder(){return t(o)}}}};mn.fromVectors=function(){return mn.apply(void 0,arguments)},mn.fromPoints=function(e,n){var t=n.map(function(n){return n.map(function(t,r){return n[r]-e[r]})});return mn.fromVectors(t)};var fn=Object.create(null);Object.assign(fn,q,B,en,ce,ee),fn.clean_number=F,fn.is_number=function(e){return null!=e&&!isNaN(e)},fn.is_vector=function(e){return null!=e&&null!=e[0]&&!isNaN(e[0])},fn.is_iterable=N,fn.flatten_input=C,fn.semi_flatten_input=G,fn.get_vector=J,fn.get_vector_of_vectors=K,fn.get_matrix2=Q,fn.get_segment=g,fn.get_line=_,fn.get_ray=c,fn.get_two_vec2=y,fn.get_array_of_vec=d,fn.get_array_of_vec2=function(){var e=Array.from(arguments),n=e.filter(function(e){return e.constructor===Array});return 2<=n.length&&!isNaN(n[0][0])?n:1===n.length&&1<=n[0].length?n[0]:e},fn.intersection=Be,Object.freeze(fn);return{vector:tn,matrix2:pn,matrix:gn,line:_n,ray:cn,segment:yn,circle:function(){for(var e,t,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var l=Array.from(r),a=l.filter(function(e){return!isNaN(e)});if(3===a.length){e=tn(a[0],a[1]);var p=n(a,3);t=p[2]}var g=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=_(i),l=[o.origin[0]+o.vector[0],o.origin[1]+o.vector[1]],a=Ae(e,t,o.origin,l);return a===void 0?void 0:a.map(function(e){return tn(e)})},d=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=c(i),l=Le(e,t,o[0],o[1]);return l===void 0?void 0:l.map(function(e){return tn(e)})},h=function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=y(i),l=Ve(e,t,o[0],o[1]);return l===void 0?void 0:l.map(function(e){return tn(e)})};return{intersectionLine:g,intersectionRay:d,intersectionSegment:h,get origin(){return e},get radius(){return t},set origin(n){e=tn(n)},set radius(e){t=e}}},polygon:hn,convexPolygon:sn,rectangle:function e(){for(var t,i,r,o=arguments.length,l=Array(o),a=0;a<o;a++)l[a]=arguments[a];var p=Array.from(l),g=p.filter(function(e){return!isNaN(e)}),_=p.filter(function(e){return e.constructor===Array});if(4===g.length){t=g.slice(0,2);var c=n(g,4);i=c[2],r=c[3]}1===_.length&&(_=_[0]),2===_.length&&"number"==typeof _[0][0]&&(t=_[0].slice(),i=_[1][0],r=_[1][1]);var y=[[t[0],t[1]],[t[0]+i,t[1]],[t[0]+i,t[1]+r],[t[0],t[1]+r]],d=s.bind(this),h=Object.create(d(e)),m=function(n,o){var l=null==o?[t[0]+i,t[1]+r]:o,a=t[0]+(l[0]-t[0])*(1-n),p=t[1]+(l[1]-t[1])*(1-n);return e(a,p,i*n,r*n)};return Object.defineProperty(h,"origin",{get:function(){return t}}),Object.defineProperty(h,"width",{get:function(){return i}}),Object.defineProperty(h,"height",{get:function(){return r}}),Object.defineProperty(h,"area",{get:function(){return i*r}}),Object.defineProperty(h,"scale",{value:m}),Object.defineProperty(h,"rotate",{value:function(){var e;return(e=sn(y)).rotate.apply(e,arguments)}}),Object.defineProperty(h,"transform",{value:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return sn(y).transform(n)}}),h},junction:mn,sector:dn,core:fn}});
