!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).math=n()}(this,(function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var e=function(t){return null!=t&&"function"==typeof t[Symbol.iterator]},o=function t(){switch(arguments.length){case void 0:case 0:return arguments;case 1:return e(arguments[0])&&"string"!=typeof arguments[0]?t.apply(void 0,n(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(r){return e(r)?n(t(r)):r}))}},u=function(){var t=o(arguments);return t.length>1?t.reduce((function(t,n){return t.concat(n)}),[]):t},i=function(){var n=u(arguments);return n.length>0&&"object"===t(n[0])&&null!==n[0]&&!isNaN(n[0].x)&&(n=["x","y","z"].map((function(t){return n[0][t]})).filter((function(t){return void 0!==t}))),n.filter((function(t){return"number"==typeof t}))},c=function(){return o(arguments).map((function(t){return i(t)}))},f=function(t){return Math.sqrt(t.map((function(t){return t*t})).reduce((function(t,n){return t+n}),0))},a=function(t){var n=f(t);return 0===n?t:t.map((function(t){return t/n}))},s=function(t,n){return t.map((function(r,e){return t[e]*n[e]})).reduce((function(t,n){return t+n}),0)},p=function(t,n){return[t[1]*n[2]-t[2]*n[1],t[0]*n[2]-t[2]*n[0],t[0]*n[1]-t[1]*n[0]]},h=function(t,n){var r=t[0]-n[0],e=t[1]-n[1];return Math.sqrt(r*r+e*e)},l=function(t,n){return 1-Math.abs(s(a(t),a(n)))<1e-6},y=function(t,n){var r=a(t),e=a(n),o=r.map((function(t,n){return r[n]+e[n]})),u=a(o),i=r.map((function(t,n){return-r[n]-e[n]}));return[u,a(i)]},m=function(t,n){return[t,n].sort((function(t,n){return t.length-n.length}))},d=function(t,n){return Array(t).fill(0).map((function(t,r){return n[r]?n[r]:t}))},v=function(t,n){t.length,n.length,n.length,t.length;var r=m(t,n);return r[0]=r[1].map((function(t,n){return r[0][n]||0})),r},b={},g={preserve:{magnitude:function(){return f(this)},isEquivalent:function(){var t=v(this,i(arguments));return t[0].map((function(n,r){return Math.abs(t[0][r]-t[1][r])<1e-6})).reduce((function(t,n){return t&&n}),!0)},isParallel:function(){return l.apply(void 0,n(v(this,i(arguments))))},dot:function(){return s.apply(void 0,n(m(this,i(arguments))))},distanceTo:function(){var t=v(this,i(arguments));return Math.sqrt(t.map((function(n,r){return Math.pow(t[0][r]-t[1][r],2)})).reduce((function(t,n){return t+n}),0))},bisect:function(){return y(this,i(arguments)).map((function(t){return b.constructor(t)}))}},vector:{copy:function(){return n(this)},normalize:function(){return a(this)},scale:function(t){return this.map((function(n){return n*t}))},cross:function(){return p(d(3,this),d(3,i(arguments)))},add:function(){var t=this;return d(this.length,i(arguments)).map((function(n,r){return t[r]+n}))},subtract:function(){var t=this;return d(this.length,i(arguments)).map((function(n,r){return t[r]-n}))},rotateZ90:function(){return[-this[1],this[0]]},rotateZ180:function(){return[-this[0],-this[1]]},rotateZ270:function(){return[this[1],-this[0]]},flip:function(){return this.map((function(t){return-t}))},lerp:function(t,n){var r=this,e=1-n;return d(this.length,i(t)).map((function(t,o){return r[o]*e+t*n}))},midpoint:function(){var t=v(this,i(arguments));return t[0].map((function(n,r){return(t[0][r]+t[1][r])/2}))}}};Object.keys(g.preserve).forEach((function(t){b[t]=g.preserve[t]})),Object.keys(g.vector).forEach((function(t){b[t]=function(){return b.constructor.apply(b,n(g.vector[t].apply(this,arguments)))}}));var j={vector:{Super:Array.prototype,Args:function(){var t=this;i(arguments).forEach((function(n){return t.push(n)}))},Getters:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},Methods:b,Static:function(t){t.fromAngle=function(n){return t(Math.cos(n),Math.sin(n))}}}},A={circle:{Args:function(){var t=Array.from(arguments),r=t.filter((function(t){return!isNaN(t)})),e=c(t);3===r.length?(this.origin=j(r[0],r[1]),this.radius=r[2]):2===e.length&&(this.radius=h.apply(void 0,n(e)),this.origin=j.apply(void 0,n(e[0])))},Getters:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},Methods:{},Static:function(t){t.fromPoints=function(){var n=c(innerArgs);return t(n,h(n[0],n[1]))}}}},O=Object.assign({},j,A),S=function(t,n){var r=Object.create(O[t].proto.prototype);return O[t].Args.apply(r,n),Object.freeze(r)},M={vector:function(){return S("vector",arguments)},circle:function(){return S("circle",arguments)},rect:function(){return S("rect",arguments)}};return Object.keys(O).forEach((function(t){var n={};n.prototype=Object.create(O[t].Super||Object.prototype),n.prototype.constructor=n,Object.keys(O[t].Getters).forEach((function(r){return Object.defineProperty(n.prototype,r,{get:O[t].Getters[r],enumerable:!0})})),Object.keys(O[t].Methods).forEach((function(r){return Object.defineProperty(n.prototype,r,{value:O[t].Methods[r]})})),O[t].proto=n,O[t].Static(M[t]),M[t].prototype=O[t].proto.prototype,M[t].prototype.constructor=M[t],Object.freeze(O[t].proto.prototype),O[t].Methods.constructor=M[t]})),M}));
